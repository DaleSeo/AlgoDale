---
title: "Course Schedule"
tags:
  - leetcode
  - graph
  - dfs
  - recursion
  - memoization
  - set
  - hash-table
  - python
date: 2022-09-21
---

LeetCodeì˜ 207ë²ˆì§¸ ë¬¸ì œì¸ [Course Schedule](https://leetcode.com/problems/course-schedule/)ë¥¼ í•¨ê»˜ í’€ì–´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.

## ë¬¸ì œ

ì´ `numCourses` ê°œì˜ ê³¼ëª©ì„ ìˆ˜ê°•í•´ì•¼ í•˜ëŠ”ë° ì´ ê³¼ëª©ë“¤ì€ `0`ë¶€í„° `numCourses - 1`ê¹Œì§€ì˜ ë¼ë²¨ì´ ë¶™ì–´ ìˆìŠµë‹ˆë‹¤.
`prerequisites` ë°°ì—´ì´ ì£¼ì–´ì§€ëŠ”ë°, `prerequisites[i] = [ai, bi]`ëŠ” ê³¼ëª© `ai`ë¥¼ ìˆ˜ê°•í•˜ë ¤ë©´ ë¨¼ì € ê³¼ëª© `bi`ë¥¼ ìˆ˜ê°•í•´ì•¼ í•œë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.

ì˜ˆë¥¼ ë“¤ì–´, `[0, 1]` ìŒì€ ê³¼ëª© `0`ì„ ìˆ˜ê°•í•˜ë ¤ë©´ ë¨¼ì € ê³¼ëª© `1`ì„ ìˆ˜ê°•í•´ì•¼ í•œë‹¤ëŠ” ê²ƒì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.

ëª¨ë“  ê³¼ëª©ì„ ë§ˆì¹  ìˆ˜ ìˆëŠ” ê²½ìš° `true`ë¥¼ ë°˜í™˜í•˜ê³ , ê·¸ë ‡ì§€ ì•Šì€ ê²½ìš° `false`ë¥¼ ë°˜í™˜í•˜ì„¸ìš”.

## ì˜ˆì œ

```py
Input: numCourses = 2, prerequisites = [[1,0]]
Output: true
```

```py
Input: numCourses = 2, prerequisites = [[1,0],[0,1]]
Output: false
```

## í’€ì´ 1

ê° ê³¼ëª©ì„ ì •ì (vertex)ë¡œ ë³´ê³ , ê³¼ëª© ê°„ì˜ ê´€ê³„ë¥¼ ê°„ì„ (edge)ë¡œ ë³´ë©´ ì´ ë¬¸ì œëŠ” ì „í˜•ì ì¸ [ê·¸ë˜í”„(graph)](/data-structures/graph/) ë¬¸ì œë¡œ ë³¼ ìˆ˜ ìˆëŠ”ë°ìš”.
ëª¨ë“  ê³¼ëª©ì„ ìˆ˜ê°•í•˜ë ¤ë©´ ê·¸ë˜í”„ì—ì„œ ìˆœí™˜(cycle)ì´ ì¼ì–´ë‚˜ë©´ ì•ˆ ë©ë‹ˆë‹¤.
ì—¬ê¸°ì„œ ìˆœí™˜ì´ë€ ê·¸ë˜í”„ë¥¼ ìˆœíšŒí•  ë•Œ í•˜ë‚˜ì˜ ë…¸ë“œë¥¼ ë‘ ë²ˆ ì´ìƒ ê±°ì¹˜ê²Œ ë˜ëŠ” ìƒí™©ì„ ì˜ë§ˆí•˜ëŠ”ë°ìš”.

ê·¸ëŸ¬ë©´ ì–´ë–»ê²Œ í•´ì•¼ ì£¼ì–´ì§„ ê·¸ë˜í”„ê°€ ìˆœí™˜í•˜ëŠ”ì§€(cyclic) ì•ˆ í•˜ëŠ”ì§€ë¥¼ ì•Œì•„ë‚¼ ìˆ˜ ìˆì„ê¹Œìš”?
ê·¸ë˜í”„ë¥¼ ê¹Šì´ ìš°ì„  íƒìƒ‰í•˜ë‹¤ê°€ ë™ì¼í•œ ë…¸ë“œë¡œ ë‹¤ì‹œ ëŒì•„ì˜¤ê²Œ ëœë‹¤ë©´ ë°”ë¡œ ìˆœí™˜ì´ ìˆë‹¤ê³  íŒë‹¨í•  ìˆ˜ ìˆê² ì£ ?
ëª¨ë“  ë…¸ë“œë¥¼ ë“¤ë¦´ ë•Œê¹Œì§€ ë™ì¼í•œ ë…¸ë“œë¡œ ë‹¤ì‹œ ëŒì•„ì˜¤ëŠ” ì¼ì´ ì—†ì—ˆë‹¤ë©´ ìˆœí™˜ì´ ì—†ë‹¤ê³  íŒë‹¨í•  ìˆ˜ ìˆì„ ê²ƒì…ë‹ˆë‹¤.

ê°„ë‹¨í•œ ì˜ˆë¡œ, ë‹¤ìŒê³¼ ê°™ì€ ìˆœí™˜í•˜ì§€ ì•ŠëŠ” ê·¸ë˜í”„ë¥¼ ìˆœíšŒí•´ë³¼ê¹Œìš”?

```py
0 â† 1
  â†– â†‘
3 â† 2
```

ê³¼ëª© `1`ì„ ìˆ˜ê°•í•˜ë ¤ë©´ ê³¼ëª© `2`ë¥¼ ìˆ˜ê°•í•´ì•¼í•˜ê³ , ê³¼ëª© `0`ì„ ìˆ˜ê°•í•˜ë¼ë©´ ê³¼ëª© `1`ê³¼ ê³¼ëª© `2`ë¥¼ ìˆ˜ê°•í•˜ë©´ ë˜ê¸° ë•Œë¬¸ì—,
ê³¼ëª© `2`ë¥¼ ì œì¼ ë¨¼ì € ìˆ˜ê°•í•˜ê³ , ê·¸ ë‹¤ìŒ ê³¼ëª© `1`ì„ ìˆ˜ê°•í•˜ê³ , ë§ˆì§€ë§‰ìœ¼ë¡œ ê³¼ëª© `0`ì„ ìˆ˜ê°•í•˜ë©´ ëª¨ë“  ê³¼ëª©ì„ ìˆ˜ê°•í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ê³¼ëª© `3`ì€ ê³¼ëª© `2`ë¥¼ ìˆ˜ê°•í–ˆë‹¤ë©´ ì–¸ì œ ìˆ˜ê°•í•´ë„ ë¬´ë°©í•©ë‹ˆë‹¤.

ì¦‰, ëª¨ë“  ê³¼ëª©ì„ ìˆ˜ê°•í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì´ ì„¸ ê°€ì§€ê°€ ë©ë‹ˆë‹¤.

```py
2 â†’ 1 â†’ 0 â†’ 3
2 â†’ 1 â†’ 3 â†’ 0
2 â†’ 3 â†’ 1 â†’ 0
```

ì–´ë–¤ ê³¼ëª©ì´ ìˆ˜ê°• ê°€ëŠ¥í•œì§€ ì•Œì•„ë‚´ë ¤ë©´, í•´ë‹¹ ê³¼ëª©ì˜ ëª¨ë“  ì„ ìˆ˜ ê³¼ëª©ì´ ìˆ˜ê°• ê°€ëŠ¥í•´ì•¼í•©ë‹ˆë‹¤.
ì´ë¥¼ ìœ„í•´ì„œ ê¹Šì´ ìš°ì„  íƒìƒ‰ìœ¼ë¡œ ì´ ê·¸ë˜í”„ë¥¼ ìˆœí™˜í•´ë³´ê² ìŠµë‹ˆë‹¤.

ìš°ì„  ê³¼ëª© `0`ì„ ìˆ˜ê°•í•˜ë ¤ë©´ ì„ ìˆ˜ ê³¼ëª©ì¸ `1`ê³¼ `2`ë¥¼ ìˆ˜ê°•í•  ìˆ˜ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.

```py
â“
0 â† 1
  â†– â†‘
3 â† 2
```

ë‘˜ ì¤‘ì— ë¨¼ì € `1`ì„ ë³´ë©´, `2`ë¥¼ ë¨¼ì € ìˆ˜ê°•í•´ì•¼í•©ë‹ˆë‹¤.

```py
â“  â“
0 â† 1
  â†– â†‘
3 â† 2
```

`2`ëŠ” ì„ ìˆ˜ ê³¼ëª©ì´ ì—†ì–´ì„œ ë¬´ì¡°ê±´ ìˆ˜ê°•í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```py
â“  â“
0 â† 1
  â†– â†‘
3 â† 2
    âœ…
```

ë”°ë¼ì„œ, ì„ ìˆ˜ ê³¼ëª©ì´ `2` ë°–ì— ì—†ëŠ” `1`ë„ ìˆ˜ê°•ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.

```py
â“  âœ…
0 â† 1
  â†– â†‘
3 â† 2
    âœ…
```

`0`ì˜ ì„ ìˆ˜ ê³¼ëª©ì¸ `1`ê³¼ `2`ê°€ ëª¨ë‘ ìˆ˜ê°•ì´ ê°€ëŠ¥í•˜ë‹ˆ, `0`ë„ ìˆ˜ê°•ì´ ê°€ëŠ¥í•´ì§‘ë‹ˆë‹¤.

```py
âœ…  âœ…
0 â† 1
  â†– â†‘
3 â† 2
    âœ…
```

ì´ì œ í™•ì¸ì´ í•„ìš”í•œ ê³¼ëª©ì€ `3` ë°–ì— ì—†ëŠ”ë°, ì„ ìˆ˜ ê³¼ëª©ì¸ `2`ë¥¼ ìˆ˜ê°•í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ `3`ë„ ìˆ˜ê°•ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.

```py
âœ…  âœ…
0 â† 1
  â†– â†‘
3 â† 2
âœ…  âœ…
```

ë°˜ë©´ì—, ë‹¤ìŒê³¼ ê°™ì´ ìˆœí™˜í•˜ëŠ” ê·¸ë˜í”„ë¥¼ ìˆœíšŒí•´ë³´ë©´ ì–´ëœê¹Œìš”?

```py
0 â† 1
  â†˜ â†‘
3 â† 2
```

ê³¼ëª© `1`ì„ ìˆ˜ê°•í•˜ë ¤ë©´ ê³¼ëª© `2`ë¥¼ ìˆ˜ê°•í•´ì•¼í•˜ëŠ”ë°, ê·¸ëŸ´ë ¤ë©´ ê³¼ëª© `0`ì„ ìˆ˜ê°•í•´ì•¼í•˜ê³ , ê·¸ëŸ´ë ¤ë©´ ë‹¤ì‹œ ê³¼ëª© `1`ì„ ìˆ˜ê°•í•´ì•¼í•©ë‹ˆë‹¤.
ê²°êµ­ ê³¼ëª© `1`ì—ì„œ ì‹œì‘í•´ì„œ ë‹¤ì‹œ ê³¼ëª© `1`ë¡œ ëŒì•„ì˜¤ëŠ” ìƒí™©ì´ í¼ì³ì§€ëŠ”ë°ìš”.
ì´ ê²½ìš° ì•„ë¬´ë¦¬ ê·¸ë˜í”„ë¥¼ ìˆœíšŒí•´ë„ ë¬´í•œ ë£¨í”„ì—ì„œ ë¹ ì ¸ë‚˜ì˜¬ ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— ëª¨ë“  ê³¼ëª©ì„ ìˆ˜ê°•í•˜ëŠ” ê²ƒì´ ë¶ˆê°€ëŠ¥í•´ì§‘ë‹ˆë‹¤.

```py
â“
0 â† 1
  â†˜ â†‘
3 â† 2
```

```py
â“  â“
0 â† 1
  â†˜ â†‘
3 â† 2
```

```py
ğŸ’¥  â“
0 â† 1
  â†˜ â†‘
3 â† 2
    â“
```

---

```py
â“
0 â† 1
  â†˜ â†‘
3 â† 2
```

ê·¸ëŸ¼ ì´ ê¹Šì´ ìš°ì„  íƒìƒ‰ì„ ìœ„í•œ ì¬ê·€ ì•Œê³ ë¦¬ì¦˜ì„ íŒŒì´ì¬ìœ¼ë¡œ êµ¬í˜„í•´ë³¼ê¹Œìš”?
[ì§‘í•©(set)](/data-structures/set/) ìë£Œêµ¬ì¡°ë¥¼ ì‚¬ìš©í•˜ì—¬ í˜„ì¬ ìˆœíšŒ ì¤‘ì¸ ë…¸ë“œë¥¼ ì¶”ì²™í•˜ê² ìŠµë‹ˆë‹¤.

```py
from functools import cache


class Solution:
    def canFinish(self, numCourses: int, prerequisites: List[List[int]]) -> bool:
        graph = {i: [] for i in range(numCourses)}
        for crs, pre in prerequisites:
            graph[crs].append(pre)

        traversing = set()

        @cache
        def can_finish(crs):
            if crs in traversing:
                return False

            traversing.add(crs)
            for pre in graph[crs]:
                if not can_finish(pre):
                    return False
            traversing.remove(crs)
            return True

        return all(can_finish(crs) for crs in graph)
```

[ë©”ëª¨ì´ì œì´ì…˜(memoization)](/algorithms/memoization/)ì„ ìœ„í•´ì„œ ì¬ê·€ í•¨ìˆ˜ì— `@cache` ë°ì½”ë ˆì´í„°ë¥¼ ë¶™ì—¬ì¤€ ë¶€ë¶„ì„ ì£¼ëª©í•˜ì„¸ìš”.
ì´ë ‡ê²Œ ê° ë…¸ë“œì˜ ìˆ˜ê°• ê°€ëŠ¥ ì—¬ë¶€ë¥¼ ê¸°ì–µí•´ë‘ë©´ í•´ë‹¹ ë…¸ë“œë¥¼ ë‹¤ì‹œ ìˆœíšŒí•  í•„ìš”ê°€ ì—†ê¸° ë•Œë¬¸ì— ë¶ˆí•„ìš”í•œ ì—°ì‚°ì„ ëŒ€í­ ì¤„ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

`n`ì„ ê³¼ëª©ì˜ ì´ ê°œìˆ˜, `p`ë¥¼ ì„ ìˆ˜ ê´€ê³„ì˜ ìˆ˜ë¼ê³  í–ˆì„ ë•Œ, ê¹Šì´ ìš°ì„  íƒìƒ‰ì„ í•˜ëŠ” ì´ í’€ì´ì˜ ì‹œê°„ ë³µì¡ë„ëŠ” `O(n+p)`ê°€ ë©ë‹ˆë‹¤.
ë°˜ë©´ì— ê³µê°„ ë³µì¡ë„ëŠ” ì„¸íŠ¸ì˜ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì´ `n`ê³¼ ë¹„ë¡€í•˜ê³  ì¸ì ‘ ë¦¬ìŠ¤íŠ¸ì˜ í¬ê¸°ê°€ `p`ì´ë¯€ë¡œ `O(n+p)`ì´ ë˜ê² ìŠµë‹ˆë‹¤.

## í’€ì´ 2

[í•´ì‹œ í…Œì´ë¸”(hash table)](/data-structures/hash-table/)ì„ ì´ìš©í•˜ì—¬ ê° ë…¸ë“œê°€ ì•„ì§ ìˆœíšŒ ì´ì „ì¸ì§€, í˜„ì¬ ìˆœíšŒ ì§„í–‰ ì¤‘ì¸ì§€, ì•„ë‹ˆë©´ ìˆœíšŒëœ ê²ƒì¸ì§€ë¥¼ ì¶”ì í•´ë³´ëŠ” ê²ƒì€ ì–´ë–¨ê¹Œìš”?
ë§Œì•½ì— ìˆœíšŒ ì¤‘ì¸ ë…¸ë“œë¥¼ ë§Œë‚œë‹¤ë©´, ìˆœí™˜(cycle)ì´ ìˆë‹¤ëŠ” ëœ»ì´ë¯€ë¡œ ëª¨ë“  ê³¼ëª©ì„ ìˆ˜ê°•í•  ìˆ˜ ì—†ì„ ê²ƒì…ë‹ˆë‹¤.
ìˆœíšŒê°€ ì´ë¯¸ ëë‚œ ë…¸ë“œë¥¼ ë§Œë‚œë‹¤ë©´, í•´ë‹¹ ê³¼ëª©ì€ ìˆ˜ê°•ì´ ê°€ëŠ¥í•˜ë‹¤ëŠ” ëœ»ì…ë‹ˆë‹¤.

ê·¸ëŸ¼ ì´ ì•Œê³ ë¦¬ì¦˜ì„ íŒŒì´ì¬ìœ¼ë¡œ êµ¬í˜„í•´ë³¼ê¹Œìš”?
ì½”ë“œê°€ ì½ê¸° ì‰½ë„ë¡, ì´ë„˜ì„ ì‚¬ìš©í•˜ì—¬ ë…¸ë“œì˜ ê° ìƒíƒœë¥¼ ì •ì˜í•˜ê² ìŠµë‹ˆë‹¤.

```py
class Status(Enum):
    INITIAL = 1
    IN_PROGRESS = 2
    FINISHED = 3

class Solution:
    def canFinish(self, numCourses: int, prerequisites: List[List[int]]) -> bool:
        graph = {i: [] for i in range(numCourses)}
        for crs, pre in prerequisites:
            graph[crs].append(pre)

        statuses = {i: Status.INITIAL for i in range(numCourses)}

        def can_finish(crs):
            if statuses[crs] == Status.IN_PROGRESS:
                return False
            if statuses[crs] == Status.FINISHED:
                return True

            statuses[crs] = Status.IN_PROGRESS
            for pre in graph[crs]:
                if not can_finish(pre):
                    return False
            statuses[crs] = Status.FINISHED
            return True

        return all(can_finish(crs) for crs in graph)
```

ì´ í’€ì´ì˜ ì‹œê°„ ë³µì¡ë„ì™€ ê³µê°„ ë³µì¡ë„ëŠ” ìœ„ í’€ì´ì™€ ë‹¤ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.
ë™ì¼í•œ ê¹Šì´ ìš°ì„  íƒìƒ‰ì„ ì•½ê°„ ë‹¤ë¥¸ ìŠ¤íƒ€ì¼ë¡œ êµ¬í˜„í•œ ê²ƒì´ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

## ë§ˆì¹˜ë©´ì„œ

ì½”ë”© í…ŒìŠ¤íŠ¸ì—ì„œ ì£¼ì–´ì§„ ê·¸ë˜í”„ê°€ ìˆœí™˜í•˜ëŠ”ì§€(cyclic) ë¹„ìˆœí™˜í•˜ëŠ”ì§€(acyclic)ë¥¼ ì•Œì•„ë‚´ëŠ” ë¬¸ì œë¥¼ ìì£¼ ë³¼ ìˆ˜ ìˆëŠ”ë°ìš”.
ë³¸ ë¬¸ì œë¥¼ í†µí•´ ê¸°ë³¸ê¸°ë¥¼ ì˜ ë‹¦ì•„ë†“ìœ¼ì…”ì„œ ê°™ì€ ìœ í˜•ì˜ ì¢€ ë” ì–´ë ¤ìš´ ë¬¸ì œë¥¼ í’€ ë•Œ í° ë„ì›€ì´ ë˜ì—ˆìœ¼ë©´ ì¢‹ê² ìŠµë‹ˆë‹¤.
