---
title: "Course Schedule"
tags:
  - leetcode
  - array
  - matrix
  - graph
  - dfs
  - recursion
  - memoization
  - set
  - stack
  - python
date: 2022-09-21
---

LeetCodeì˜ 207ë²ˆì§¸ ë¬¸ì œì¸ [Course Schedule](https://leetcode.com/problems/course-schedule/)ë¥¼ í•¨ê»˜ í’€ì–´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.

## ë¬¸ì œ

ì´ `numCourses` ê°œì˜ ê³¼ëª©ì„ ìˆ˜ê°•í•´ì•¼ í•˜ëŠ”ë° ì´ ê³¼ëª©ë“¤ì€ `0`ë¶€í„° `numCourses - 1`ê¹Œì§€ì˜ ë¼ë²¨ì´ ë¶™ì–´ ìˆìŠµë‹ˆë‹¤.
`prerequisites` ë°°ì—´ì´ ì£¼ì–´ì§€ëŠ”ë°, `prerequisites[i] = [ai, bi]`ëŠ” ê³¼ëª© `ai`ë¥¼ ìˆ˜ê°•í•˜ë ¤ë©´ ë¨¼ì € ê³¼ëª© `bi`ë¥¼ ìˆ˜ê°•í•´ì•¼ í•œë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.

ì˜ˆë¥¼ ë“¤ì–´, `[0, 1]` ìŒì€ ê³¼ëª© `0`ì„ ìˆ˜ê°•í•˜ë ¤ë©´ ë¨¼ì € ê³¼ëª© `1`ì„ ìˆ˜ê°•í•´ì•¼ í•œë‹¤ëŠ” ê²ƒì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.

ëª¨ë“  ê³¼ëª©ì„ ë§ˆì¹  ìˆ˜ ìˆëŠ” ê²½ìš° `true`ë¥¼ ë°˜í™˜í•˜ê³ , ê·¸ë ‡ì§€ ì•Šì€ ê²½ìš° `false`ë¥¼ ë°˜í™˜í•˜ì„¸ìš”.

## ì˜ˆì œ

```py
Input: numCourses = 2, prerequisites = [[1,0]]
Output: true
```

```py
Input: numCourses = 2, prerequisites = [[1,0],[0,1]]
Output: false
```

## í’€ì´ 1

ê° ê³¼ëª©ì„ ì •ì (vertex)ë¡œ ë³´ê³ , ê³¼ëª© ê°„ì˜ ê´€ê³„ë¥¼ ê°„ì„ (edge)ë¡œ ë³´ë©´ ì´ ë¬¸ì œëŠ” ì „í˜•ì ì¸ ê·¸ë˜í”„ ë¬¸ì œë¡œ ë³¼ ìˆ˜ ìˆëŠ”ë°ìš”.
ëª¨ë“  ê³¼ëª©ì„ ìˆ˜ê°•í•˜ë ¤ë©´ ê·¸ë˜í”„ì—ì„œ ìˆœí™˜(cycle)ì´ ì¼ì–´ë‚˜ë©´ ì•ˆ ë©ë‹ˆë‹¤.
ì—¬ê¸°ì„œ ìˆœí™˜ì´ë€ ê·¸ë˜í”„ë¥¼ ìˆœíšŒí•  ë•Œ í•˜ë‚˜ì˜ ë…¸ë“œë¥¼ 2ë²ˆ ì´ìƒ ê±°ì¹˜ê²Œ ë˜ëŠ” ìƒí™©ì„ ì˜ë§ˆí•˜ëŠ”ë°ìš”.

ì˜ˆë¥¼ ë“¤ì–´ì„œ, ë‹¤ìŒ ê·¸ë˜í”„ë¥¼ ìˆœíší•  ë•ŒëŠ” ìˆœí™˜ì´ ì¼ì–´ë‚˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

```py
0 -> 1 -> 2
  ------>
```

ê³¼ëª© `1`ì„ ìˆ˜ê°•í•˜ë ¤ë©´ ê³¼ëª© `2`ë¥¼ ìˆ˜ê°•í•´ì•¼í•˜ê³ , ê³¼ëª© `0`ì„ ìˆ˜ê°•í•˜ë¼ë©´ ê³¼ëª© `1`ê³¼ ê³¼ëª© `2`ë¥¼ ìˆ˜ê°•í•˜ë©´ ë˜ê¸° ë•Œë¬¸ì—,
ê³¼ëª© `2`ë¥¼ ì œì¼ ë¨¼ì € ìˆ˜ê°•í•˜ê³ , ê·¸ ë‹¤ìŒ ê³¼ëª© `1`ì„ ìˆ˜ê°•í•˜ê³ , ë§ˆì§€ë§‰ìœ¼ë¡œ ê³¼ëª© `0`ì„ ìˆ˜ê°•í•˜ë©´ ëª¨ë“  ê³¼ëª©ì„ ìˆ˜ê°•í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë°˜ë©´ì— ë‹¤ìŒ ê·¸ë˜í”„ì—ì„œëŠ” ìˆœí™˜ì´ ë°œìƒí•˜ëŠ”ë°ìš”.

```py
0 -> 1 -> 2
  <------
```

ê³¼ëª© `1`ì„ ìˆ˜ê°•í•˜ë ¤ë©´ ê³¼ëª© `2`ë¥¼ ìˆ˜ê°•í•´ì•¼í•˜ëŠ”ë°, ê·¸ëŸ´ë ¤ë©´ ê³¼ëª© `0`ì„ ìˆ˜ê°•í•´ì•¼í•˜ê³ , ê·¸ëŸ´ë ¤ë©´ ë‹¤ì‹œ ê³¼ëª© `1`ì„ ìˆ˜ê°•í•´ì•¼í•©ë‹ˆë‹¤.
ê²°êµ­ ê³¼ëª© `1`ì—ì„œ ì‹œì‘í•´ì„œ ë‹¤ì‹œ ê³¼ëª© `1`ë¡œ ëŒì•„ì˜¤ëŠ” ìƒí™©ì´ í¼ì³ì§€ëŠ”ë°ìš”.
ì´ ê²½ìš° ì•„ë¬´ë¦¬ ê·¸ë˜í”„ë¥¼ ìˆœíšŒí•´ë„ ë¬´í•œ ë£¨í”„ì—ì„œ ë¹ ì ¸ë‚˜ì˜¬ ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— ëª¨ë“  ê³¼ëª©ì„ ìˆ˜ê°•í•˜ëŠ” ê²ƒì´ ë¶ˆê°€ëŠ¥í•´ì§‘ë‹ˆë‹¤.

ê·¸ëŸ¬ë©´ ì–´ë–»ê²Œ í•´ì•¼ ê·¸ë˜í”„ì—ì„œ ìˆœíšŒê°€ ìˆëŠ”ì§€ ì•Œì•„ë‚¼ ìˆ˜ ìˆì„ê¹Œìš”?
ìš°ë¦¬ëŠ” ê·¸ë˜í”„ë¥¼ ìˆœíšŒí•˜ë©´ì„œ 2ê°€ì§€ ì •ë³´ë¥¼ ì¶”ì í•´ì•¼í•˜ëŠ”ë°ìš”.

ì²« ë²ˆì§¸ëŠ” ê° ë…¸ë“œë¥¼ ë°©ë¬¸í•œ ì ì´ ìˆëŠ”ì§€ì´ê³ , ë‘ ë²ˆì§¸ëŠ” ê° ë…¸ë“œë¥¼ ìˆœíšŒí•˜ê³  ìˆëŠ” ì¤‘ì¸ì§€ì…ë‹ˆë‹¤.
ì²« ë²ˆì§¸ëŠ” ì¬ ë°©ë¬¸ì„ ë°©ì§€í•˜ê¸° ìœ„í•¨ì´ê³ , ë‘ ë²ˆì§¸ëŠ” ìˆœí™˜ì„ ì°¾ê¸° ìœ„í•¨ì…ë‹ˆë‹¤.
ê·¸ë˜í”„ë¥¼ ìˆœíšŒí•˜ë‹¤ê°€ ì´ì „ì— ë°©ë¬¸í•œ ì ì´ ìˆëŠ” ë…¸ë“œê°€ ë‚˜ì˜¤ë©´ ë‹¤ìŒ ë…¸ë“œë¡œ ê±´ë„ˆ ë›¸ ìˆ˜ ìˆìœ¼ë©°, ìˆœíšŒí•˜ê³  ìˆëŠ” ë…¸ë“œë¥¼ ë‹¤ì‹œ ë§Œë‚œë‹¤ë©´ ì´ ê²ƒì€ ìˆœí™˜ì´ ì¼ì–´ë‚˜ê³  ìˆë‹¤ëŠ” ëœ»ì…ë‹ˆë‹¤.

ë‘ ê°œì˜ [ì„¸íŠ¸(set)](/data-structures/set/) ìë£Œêµ¬ì¡°ë¥¼ ì‚¬ìš©í•˜ë©´ ì–´ë µì§€ ì•Šê²Œ ì´ ë‘ ê°€ì§€ ì •ë³´ë¥¼ ì¶”ì í•  ìˆ˜ ìˆì„ ê²ƒì…ë‹ˆë‹¤.
ê·¸ë¦¬ê³  ê·¸ë˜í”„ë¥¼ ì „ì²´ì ìœ¼ë¡œ íƒìƒ‰í•˜ê¸° ì „ì—ëŠ” ì•Œ ìˆ˜ ì—†ê¸° ë•Œë¬¸ì—, ê¹Šì´ ìš°ì„  íƒìƒ‰ì„ í•˜ë“ ì§€ ë„ˆë¹„ ìš°ì„  íƒìƒ‰ì„ í•˜ë“ ì§€ ì¤‘ìš”í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

ê·¸ëŸ¼ ì§€ê¸ˆê¹Œì§€ ì„¤ëª…ë“œë¦° ì•Œê³ ë¦¬ì¦˜ì„ ìˆœí™˜ì´ ë°œìƒí•˜ëŠ” ê·¸ë˜í”„ë¥¼ ìƒëŒ€ë¡œ ì ìš©í•´ë³´ê² ìŠµë‹ˆë‹¤.

```py
ğŸ‘‡
0 -> 1 -> 2
  <------

ìˆœíšŒ ì¤‘?: {0}
ë°©ë¬¸í•œ ì ?: {0}
```

```py
    ğŸ‘‡
0 -> 1 -> 2
  <------

ìˆœíšŒ ì¤‘?: {0, 1}
ë°©ë¬¸í•œ ì ?: {0, 1}
```

```py
         ğŸ‘‡
0 -> 1 -> 2
  <------

ìˆœíšŒ ì¤‘?: {0, 1, 2}
ë°©ë¬¸í•œ ì ?: {0, 1, 2}
```

```py
ğŸ‘‡
0 -> 1 -> 2
  <------

ìˆœíšŒ ì¤‘?: {0, 1, 2} âŒ ìˆœíšŒ ê²½ë¡œì— ë…¸ë“œ 0ì´ ì´ë¯¸ ìˆìŒ => ìˆœí™˜ ë°œìƒ
ë°©ë¬¸í•œ ì ?: {0, 1, 2}
```

ìˆœí™˜ì´ ë°œìƒí•˜ì§€ ì•ŠëŠ” ê·¸ë˜í”„ë¥¼ ìƒëŒ€ë¡œë„ ì ìš©í•´ë³´ê² ìŠµë‹ˆë‹¤.

```py
ğŸ‘‡
0 -> 1 -> 2
  ------>

ìˆœíšŒ ì¤‘?: {0}
ë°©ë¬¸í•œ ì ?: {0}
```

```py
    ğŸ‘‡
0 -> 1 -> 2
  ------>

ìˆœíšŒ ì¤‘?: {0, 1}
ë°©ë¬¸í•œ ì ?: {0, 1}
```

```py
         ğŸ‘‡
0 -> 1 -> 2
  ------>

ìˆœíšŒ ì¤‘?: {0, 1, 2}
ë°©ë¬¸í•œ ì ?: {0, 1, 2}
```

```py
# ë…¸ë“œ 2 ìˆœíšŒ ì™„ë£Œ

    ğŸ‘‡
0 -> 1 -> 2
  ------>

ìˆœíšŒ ì¤‘?: {0, 1}
ë°©ë¬¸í•œ ì ?: {0, 1, 2}
```

```py
# ë…¸ë“œ 1 ìˆœíšŒ ì™„ë£Œ

ğŸ‘‡
0 -> 1 -> 2
  ------>

ìˆœíšŒ ì¤‘?: {0}
ë°©ë¬¸í•œ ì ?: {0, 1, 2}
```

```py
# ë…¸ë“œ 0 ìˆœíšŒ ì™„ë£Œ, ë…¸ë“œ 2ëŠ” ì´ë¯¸ ë°©ë¬¸í–ˆìœ¼ë¯€ë¡œ ê±´ë„ˆ ë„ë©° ë” ì´ìƒ ìˆœíšŒí•  ë…¸ë“œ ì—†ìŒ

0 -> 1 -> 2
  ------>

ìˆœíšŒ ì¤‘?: {}
ë°©ë¬¸í•œ ì ?: {0, 1, 2}
```

ì§€ê¸ˆê¹Œì§€ ì„¤ëª…ë“œë¦° ì•Œê³ ë¦¬ì¦˜ì„ ê¹Šì´ ìš°ì„  íƒìƒ‰ê³¼ ì¬ê·€ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ íŒŒì´ì¬ìœ¼ë¡œ êµ¬í˜„í•´ë³´ê² ìŠµë‹ˆë‹¤.

```py
class Solution:
    def canFinish(self, numCourses: int, prerequisites: List[List[int]]) -> bool:
        graph = {i: [] for i in range(numCourses)}
        for src, dst in prerequisites:
            graph[src].append(dst)

        visited = set()
        traversing = set()

        def has_cycle(node):
            visited.add(node)
            traversing.add(node)
            for adj in graph[node]:
                if adj in traversing:
                    return True
                if adj in visited:
                    continue
                if has_cycle(adj):
                    return True
            traversing.remove(node)
            return False

        for node in graph:
            if has_cycle(node):
                return False
        return True
```

`n`ì„ ê³¼ëª©ì˜ ì´ ê°œìˆ˜, `p`ë¥¼ ì„ ìˆ˜ ê´€ê³„ì˜ ìˆ˜ë¼ê³  í–ˆì„ ë•Œ, ê¹Šì´ ìš°ì„  íƒìƒ‰ì„ í•˜ëŠ” ì´ í’€ì´ì˜ ì‹œê°„ ë³µì¡ë„ëŠ” `O(n+p)`ê°€ ë©ë‹ˆë‹¤.
ë°˜ë©´ì— ê³µê°„ ë³µì¡ë„ëŠ” ë‘ ê°œì˜ ì„¸íŠ¸ê°€ ì´ `2n`ì˜ ì¶”ê°€ì ì¸ ë©”ëª¨ë¦¬ë¥¼ í•„ìš”ë¡œ í•˜ê¸° ë•Œë¬¸ì— `O(n)`ì´ ë˜ê² ìŠµë‹ˆë‹¤.

## í’€ì´ 2

[ì¬ê·€ ì•Œê³ ë¦¬ì¦˜](/algorithms/recursion/)ì˜ ì„±ëŠ¥ ìµœì í™”ì— í”íˆ ì‚¬ìš©ë˜ëŠ” [ë©”ëª¨ì´ì œì´ì…˜(memoization)](/algorithms/memoization/) ê¸°ë²•ì„ í™œìš©í•˜ë©´ ì„¸íŠ¸ ìë£Œêµ¬ì¡°ë¥¼ í•˜ë‚˜ë§Œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ê° ë…¸ë“œì—ì„œ ìˆœí™˜ì´ ì¼ì–´ë‚  ìˆ˜ ìˆëŠ”ì§€ ì—¬ë¶€ë¥¼ ê¸°ì–µí•´ë‘ë©´ êµ³ì´ ì¬ ìˆœíšŒí•˜ì§€ ì•Šì•„ë„ ë˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

ì˜ˆë¥¼ ë“¤ì–´, ìœ„ì—ì„œ ì‚¬ìš©í•œ ë‘ ê°€ì§€ ì˜ˆì œë¥¼ ìƒëŒ€ë¡œ ì¬ê·€ í•¨ìˆ˜ê°€ ì–´ë–»ê²Œ í˜¸ì¶œë ì§€ ì‹œê°í™”í•´ë³¼ê¹Œìš”?

```py
0 -> 1 -> 2
  ------>

has_cycle(0) ğŸ‘‰ false
    has_cycle(1) ğŸ‘‰ false
        has_cycle(2) ğŸ‘‰ false
    has_cycle(2) ğŸ‘‰ false (ì¬ì‚¬ìš©)
```

```py
0 -> 1 -> 2
  <------

has_cycle(0) ğŸ‘‰ true
    has_cycle(1) ğŸ‘‰ true
        has_cycle(2) ğŸ‘‰ true
```

ê·¸ëŸ¼ ì´ ë³€í˜•ëœ ì•Œê³ ë¦¬ì¦˜ì„ íŒŒì´ì¬ìœ¼ë¡œ êµ¬í˜„í•´ë³´ê² ìŠµë‹ˆë‹¤.
`visited` ì„¸íŠ¸ê°€ ì‚¬ë¼ì¡Œê³ , ëŒ€ì‹ ì— ë©”ëª¨ì´ì œì´ì…˜ì„ ìœ„í•´ì„œ `@cache` ë°ì½”ë¦¬ì´í„°ë¥¼ ì¬ê·€ í•¨ìˆ˜ì— ë¶™ì—¬ì£¼ì—ˆìŠµë‹ˆë‹¤.

```py
from collections import defaultdict
from functools import cache


class Solution:
    def canFinish(self, numCourses: int, prerequisites: List[List[int]]) -> bool:
        graph = defaultdict(list)
        for src, dst in prerequisites:
            graph[src].append(dst)

        traversing = set()

        @cache
        def has_cycle(node):
            traversing.add(node)
            for adj in graph[node]:
                if adj in traversing:
                    return True
                if has_cycle(adj):
                    return True
            traversing.remove(node)
            return False

        for node in graph:
            if has_cycle(node):
                return False
        return True
```

ì´ í’€ì´ì˜ ì‹œê°„ ë³µì¡ë„ì™€ ê³µê°„ ë³µì¡ë„ëŠ” ìœ„ í’€ì´ì™€ ë‹¤ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.
ì„¸íŠ¸ë¥¼ ë‘ ê°œë¥¼ ì‚¬ìš©í•˜ë“  í•œ ê°œë¥¼ ì‚¬ìš©í•˜ë“  ë¹…ì˜¤ ê³„ì‚°ë²•ì—ì„œëŠ” ìœ ì˜ë¯¸í•œ ì°¨ì´ê°€ ë°œìƒí•˜ì§€ ì•Šê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

## ë§ˆì¹˜ë©´ì„œ

ì½”ë”© í…ŒìŠ¤íŠ¸ì—ì„œ ì£¼ì–´ì§„ ê·¸ë˜í”„ê°€ ìˆœí™˜í•˜ëŠ”ì§€(cyclic) ë¹„ìˆœí™˜í•˜ëŠ”ì§€(acyclic)ë¥¼ ì•Œì•„ë‚´ëŠ” ë¬¸ì œë¥¼ ìì£¼ ë³¼ ìˆ˜ ìˆëŠ”ë°ìš”.
ë³¸ ë¬¸ì œë¥¼ í†µí•´ ê¸°ë³¸ê¸°ë¥¼ ì˜ ë‹¦ì•„ë†“ìœ¼ì…”ì„œ ê°™ì€ ìœ í˜•ì˜ ì¢€ ë” ì–´ë ¤ìš´ ë¬¸ì œë¥¼ í’€ ë•Œ í° ë„ì›€ì´ ë˜ì—ˆìœ¼ë©´ ì¢‹ê² ìŠµë‹ˆë‹¤.
