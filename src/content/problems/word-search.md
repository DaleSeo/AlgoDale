---
title: "Word Search"
tags:
  - leetcode
  - matrix
  - graph
  - recursion
  - backtracking
  - dfs
  - python
date: 2024-06-13
---

LeetCodeì˜ 79ë²ˆì§¸ ë¬¸ì œì¸ [Word Search](https://leetcode.com/problems/word-search/)ë¥¼ í•¨ê»˜ í’€ì–´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.

## ë¬¸ì œ

`m x n` ê²©ìž í˜•íƒœì˜ ë¬¸ìžíŒê³¼ ë¬¸ìžì—´ `word`ê°€ ì£¼ì–´ì¡Œì„ ë•Œ, ê²©ìžì— `word`ê°€ ì¡´ìž¬í•˜ë©´ ì°¸ì„ ë°˜í™˜í•˜ì‹œì˜¤.

ë‹¨ì–´ëŠ” ìˆœì°¨ì ìœ¼ë¡œ ì¸ì ‘í•œ ì…€(cell)ì˜ ë¬¸ìžë“¤ë¡œ êµ¬ì„±ë  ìˆ˜ ìžˆìœ¼ë©°, ì—¬ê¸°ì„œ ì¸ì ‘í•œ ì…€ì€ ìˆ˜í‰ ë˜ëŠ” ìˆ˜ì§ìœ¼ë¡œ ì´ì›ƒí•˜ê³  ìžˆìŠµë‹ˆë‹¤.
ë™ì¼í•œ ë¬¸ìž ì…€ì€ í•œ ë²ˆ ì´ìƒ ì‚¬ìš©í•˜ë©´ ì•ˆ ë©ë‹ˆë‹¤.

## ì˜ˆì œ

![word-2](https://assets.leetcode.com/uploads/2020/11/04/word2.jpg)

```py
ìž…ë ¥: board = [
  ["A","B","C","E"],
  ["S","F","C","S"],
  ["A","D","E","E"]
], word = "ABCCED"
ì¶œë ¥: true
```

![word-1](https://assets.leetcode.com/uploads/2020/11/04/word-1.jpg)

```py
ìž…ë ¥: board = [
  ["A","B","C","E"],
  ["S","F","C","S"],
  ["A","D","E","E"]
], word = "SEE"
ì¶œë ¥: true
```

## í’€ì´ 1

ì£¼ì–´ì§„ ê²©ìž ë‚´ì˜ ë¬¸ìžë¥¼ ì •ì (Vertex, Node)ìœ¼ë¡œ ë³´ê³ , ê° ë¬¸ìžê°€ ìƒí•˜ì¢Œìš°ì˜ ë¬¸ìžë“¤ê³¼ ê°„ì„ (Edge)ìœ¼ë¡œ ì—°ê²°ë˜ì–´ ìžˆë‹¤ê³  ìƒê°í•˜ë©´ ì´ ë¬¸ì œëŠ” ê·¸ëž˜í”„(Graph) ë¬¸ì œë¡œ ë³¼ ìˆ˜ ìžˆëŠ”ë°ìš”.
ê·¸ëŸ¬ë©´ ê·¸ëž˜í”„ íƒìƒ‰ì„ í†µí•´ì„œ ê²©ìž ë‚´ì— ë¬¸ìžë“¤ì„ ì´ì–´ì„œ ì£¼ì–´ì§„ ë¬¸ìžì—´ì„ ë§Œë“¤ ìˆ˜ ìžˆëŠ”ì§€ ì•Œì•„ë‚¼ ìˆ˜ ìžˆì„ ê²ƒìž…ë‹ˆë‹¤.

ìž, ì²« ë²ˆì§¸ ì˜ˆì œì—ì„œ ì£¼ì–´ì§„ ìž…ë ¥ ê²©ìžë¥¼ ìƒëŒ€ë¡œ ìš°ë¦¬ í•¨ê»˜ ì°¨ê·¼ì°¨ê·¼ ê·¸ëž˜í”„ íƒìƒ‰ì„ ì‹œìž‘í•´ë³¼ê¹Œìš”?

ìš°ì„ , ë¬¸ìžì—´ì˜ ì¸ë±ìŠ¤ `0`ì— ìžˆëŠ” ë¬¸ìž `A`ë¥¼ ì°¾ì•„ì•¼í•˜ëŠ”ë°ìš”.
ë§ˆì¹¨ `board[0][0]`ì— ë¬¸ìž `A`ê°€ ìžˆìŠµë‹ˆë‹¤.
ë”°ë¼ì„œ ìš°ë¦¬ëŠ” ì—¬ê¸°ì„œë¶€í„° ê·¸ëž˜í”„ íƒìƒ‰ì„ ì‹œìž‘í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.

```py
word = "ABCCED"
        ^

["A","B","C","E"]
  ^
["S","F","C","S"]

["A","D","E","E"]

board[0][0] == word[0] == "A"
```

ë‹¤ìŒìœ¼ë¡œ ë¬¸ìžì—´ì˜ ì¸ë±ìŠ¤ `1`ì— ìžˆëŠ” ë¬¸ìž `B`ë¥¼ ì°¾ì•„ì•¼í•˜ëŠ”ë°ìš”.
`board[0][0]`ì„ ê¸°ì¤€ìœ¼ë¡œ ìƒí•˜ì¢Œìš°ë¥¼ ì‚´íŽ´ë³´ë©´, ë¬¸ìžíŒì—ì„œ ë²—ì–´ë‚˜ê¸° ë•Œë¬¸ì— ë°‘ìœ¼ë¡œ ë˜ëŠ” ì˜¤ë¥¸ìª½ìœ¼ë¡œë§Œ ê°ˆ ìˆ˜ ìžˆë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.
ì˜¤ë¥¸ìª½ì— ìžˆëŠ” `board[0][1]`ì—ì„œ ë¬¸ìž `B`ë¥¼ ì°¾ì•˜ì„ ìˆ˜ ìžˆë„¤ìš”.

```py
word = "ABCCED"
        ^^

- ìƒ: `board[-1][0]` ðŸ‘‰ ë¬¸ìžíŒì—ì„œ ë²—ì–´ë‚¨ âŒ
- í•˜: `board[1][0]` ðŸ‘‰ `"S" != "B"` âŒ
- ì¢Œ: `board[0][-1]` ðŸ‘‰ ë¬¸ìžíŒì—ì„œ ë²—ì–´ë‚¨ âŒ
- ìš°: `board[0][1]` ðŸ‘‰ `"B" == "B"` âœ…

["A","B","C","E"]
  ^   ^
["S","F","C","S"]

["A","D","E","E"]

board[0][0] == word[0] == "A"
  board[0][1] == word[1] == "B"
```

ë‹¤ìŒìœ¼ë¡œ ë¬¸ìžì—´ì˜ ì¸ë±ìŠ¤ `2`ì— ìžˆëŠ” ë¬¸ìž `C`ë¥¼ ì°¾ì•„ì•¼í•˜ëŠ”ë°ìš”.
`board[0][1]`ì„ ê¸°ì¤€ìœ¼ë¡œ ìƒí•˜ì¢Œìš°ë¥¼ ì‚´íŽ´ë³´ë©´, `board[0][0]`ëŠ” ì´ë¯¸ ê²½ë¡œì— ìžˆê¸° ë•Œë¬¸ì— ë‹¤ì‹œ ëŒì•„ê°ˆ ìˆ˜ ì—†ë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.
ì˜¤ë¥¸ìª½ì— ìžˆëŠ” `board[0][2]`ì—ì„œ ë¬¸ìž `C`ë¥¼ ì°¾ì„ ìˆ˜ ìžˆë„¤ìš”.

```py
word = "ABCCED"
        ^^^

- ìƒ: `board[-1][1]` ðŸ‘‰ ë¬¸ìžíŒì—ì„œ ë²—ì–´ë‚¨ âŒ
- í•˜: `board[1][1]` ðŸ‘‰ `"F" != "C"` âŒ
- ì¢Œ: `board[0][0]` ðŸ‘‰ ë°©ë¬¸ ê²½ë¡œì— ìžˆìŒ âŒ
- ìš°: `board[0][2]` ðŸ‘‰ `"C" == "C"` âœ…

["A","B","C","E"]
  ^   ^   ^
["S","F","C","S"]

["A","D","E","E"]

board[0][0] == word[0] == "A"
  board[0][1] == word[1] == "B"
    board[0][2] == word[2] == "C"
```

ë‹¤ìŒìœ¼ë¡œ ë¬¸ìžì—´ì˜ ì¸ë±ìŠ¤ `3`ì— ìžˆëŠ” ë¬¸ìž `C`ë¥¼ ì°¾ì•„ì•¼í•˜ëŠ”ë°ìš”.
`board[0][2]`ì„ ê¸°ì¤€ìœ¼ë¡œ ìƒí•˜ì¢Œìš°ë¥¼ ì‚´íŽ´ë³´ë©´, ì•„ëž˜ì— ìžˆëŠ” `board[1][2]`ì—ì„œ ë¬¸ìž `C`ë¥¼ ì°¾ì„ ìˆ˜ ìžˆë„¤ìš”.

```py
word = "ABCCED"
        ^^^^

- ìƒ: `board[-1][2]` ðŸ‘‰ ë¬¸ìžíŒì—ì„œ ë²—ì–´ë‚¨ âŒ
- í•˜: `board[1][2]` ðŸ‘‰ `"C" == "C"` âœ…
- ì¢Œ: `board[0][1]` ðŸ‘‰ ë°©ë¬¸ ê²½ë¡œì— ìžˆìŒ âŒ
- ìš°: `board[0][3]` ðŸ‘‰ `"E" != "C"` âŒ

["A","B","C","E"]
  ^   ^   ^
["S","F","C","S"]
          ^
["A","D","E","E"]

board[0][0] == word[0] == "A"
  board[0][1] == word[1] == "B"
    board[0][2] == word[2] == "C"
      board[1][2] == word[3] == "C"
```

ë‹¤ìŒìœ¼ë¡œ ë¬¸ìžì—´ì˜ ì¸ë±ìŠ¤ `4`ì— ìžˆëŠ” ë¬¸ìž `E`ë¥¼ ì°¾ì•„ì•¼í•˜ëŠ”ë°ìš”.
`board[1][2]`ì„ ê¸°ì¤€ìœ¼ë¡œ ìƒí•˜ì¢Œìš°ë¥¼ ì‚´íŽ´ë³´ë©´, ì•„ëž˜ì— ìžˆëŠ” `board[2][2]`ì—ì„œ ë¬¸ìž `C`ë¥¼ ì°¾ì„ ìˆ˜ ìžˆë„¤ìš”.

```py
word = "ABCCED"
        ^^^^^

- ìƒ: `board[0][2]` ðŸ‘‰ ë°©ë¬¸ ê²½ë¡œì— ìžˆìŒ âŒ
- í•˜: `board[2][2]` ðŸ‘‰ `"E" == "E"` âœ…
- ì¢Œ: `board[1][1]` ðŸ‘‰ ë°©ë¬¸ ê²½ë¡œì— ìžˆìŒ âŒ
- ìš°: `board[1][3]` ðŸ‘‰ `"S" != "E"` âŒ

["A","B","C","E"]
  ^   ^   ^
["S","F","C","S"]
          ^
["A","D","E","E"]
          ^

board[0][0] == word[0] == "A"
  board[0][1] == word[1] == "B"
    board[0][2] == word[2] == "C"
      board[1][2] == word[3] == "C"
        board[2][2] == word[4] == "E"
```

ë§ˆì§€ë§‰ìœ¼ë¡œ ë¬¸ìžì—´ì˜ ì¸ë±ìŠ¤ `5`ì— ìžˆëŠ” ë¬¸ìž `D`ë¥¼ ì°¾ì•„ì•¼í•˜ëŠ”ë°ìš”.
`board[2][2]`ì„ ê¸°ì¤€ìœ¼ë¡œ ìƒí•˜ì¢Œìš°ë¥¼ ì‚´íŽ´ë³´ë©´, ì™¼ìª½ì— ìžˆëŠ” `board[2][1]`ì—ì„œ ë¬¸ìž `D`ë¥¼ ì°¾ì„ ìˆ˜ ìžˆë„¤ìš”.

```py
word = "ABCCED"
        ^^^^^^

- ìƒ: `board[1][2]` ðŸ‘‰ ë°©ë¬¸ ê²½ë¡œì— ìžˆìŒ âŒ
- í•˜: `board[3][2]` ðŸ‘‰ ë¬¸ìžíŒì—ì„œ ë²—ì–´ë‚¨ âŒ
- ì¢Œ: `board[2][1]` ðŸ‘‰ `"D" == "D"` âœ…
- ìš°: `board[2][3]` ðŸ‘‰ `"E" != "D"` âŒ

["A","B","C","E"]
  ^   ^   ^
["S","F","C","S"]
          ^
["A","D","E","E"]
      ^   ^

board[0][0] == word[0] == "A"
  board[0][1] == word[1] == "B"
    board[0][2] == word[2] == "C"
      board[1][2] == word[3] == "C"
        board[2][2] == word[4] == "E"
          board[2][1] == word[4] == "D"
```

ì§€ê¸ˆê¹Œì§€ ì„¤ëª…ë“œë¦° ì•Œê³ ë¦¬ì¦˜ì„ ê¹Šì´ ìš°ì„  íƒìƒ‰ì„ ì‚¬ìš©í•˜ì—¬ êµ¬í˜„í•´ë³´ê² ìŠµë‹ˆë‹¤.
[ì§‘í•©(set)](/data-structures/set/) ìžë£Œêµ¬ì¡°ë¥¼ ì‚¬ìš©í•˜ì—¬ ë°©ë¬¸ ê²½ë¡œì— ìžˆëŠ” ì •ì ì„ ì¶”ì í•˜ê² ìŠµë‹ˆë‹¤.

```py
class Solution:
    def exist(self, board: List[List[str]], word: str) -> bool:
        n_rows, n_cols = len(board), len(board[0])
        traversing = set()

        def dfs(row, col, idx):
            if idx == len(word):
                return True
            if not (0 <= row < n_rows and 0 <= col < n_cols):
                return False
            if board[row][col] != word[idx]:
                return False
            if (row, col) in traversing:
                return False

            traversing.add((row, col))
            result = any(
                dfs(row + r, col + c, idx + 1)
                for (r, c) in [(1, 0), (-1, 0), (0, 1), (0, -1)]
            )
            traversing.remove((row, col))
            return result

        return any(dfs(r, c, 0) for r in range(n_rows) for c in range(n_cols))
```

ìž…ë ¥ ê²©ìžì˜ ë†’ì´ë¥¼ `m` ë„ˆë¹„ë¥¼ `n`, ê·¸ë¦¬ê³  `w`ë¥¼ ë¬¸ìžì—´ì˜ ê¸¸ì´ë¼ê³  í–ˆì„ ë•Œ, ì´ í’€ì´ì˜ ì‹œê°„ ë³µìž¡ë„ëŠ” `O(m * n * 4^w)`ìž…ë‹ˆë‹¤.
ìƒí•˜ì¢Œìš°ë¥¼ ìƒëŒ€ë¡œ ìž¬ê·€ì ìœ¼ë¡œ ê·¸ëž˜í”„ íƒìƒ‰ì„ í•˜ëŠ”ë° `O(4^w)`ì˜ ì‹œê°„ì´ ê±¸ë¦¬ëŠ”ë°, ì´ ìž‘ì—…ì„ ê²©ìž ë‚´ì˜ ëª¨ë“  ë¬¸ìžë¥¼ ìƒëŒ€ë¡œ ìˆ˜í–‰í•´ì•¼í•˜ê¸° ë•Œë¬¸ìž…ë‹ˆë‹¤.
ê³µê°„ ë³µìž¡ë„ëŠ” ì§‘í•©ì´ ì°¨ì§€í•˜ëŠ” ë©”ëª¨ë¦¬ê°€ ë¬¸ìžì—´ì˜ ê¸¸ì´ì— ë¹„ë¡€í•´ì„œ ì¦ê°€í•˜ë¯€ë¡œ `O(w)`ì´ ë˜ê² ìŠµë‹ˆë‹¤.

## í’€ì´ 2

ë§Œì•½ì— ë©´ì ‘ê´€ì´ ìž…ë ¥ ê²©ìžì— ì €ìž¥ëœ ê°’ì„ ë³€ê²½í•´ë„ ëœë‹¤ê³  í•˜ë©´, ë³„ë„ì˜ ì§‘í•©ì„ ì‚¬ìš©í•˜ì§€ ì•Šê³ ë„ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.

ê²©ìžì˜ ì–´ëŠ ì§€ì ì—ì„œ ë¬¸ìžì—´ì˜ ë‹¤ìŒ ì¸ë±ìŠ¤ë¥¼ ìƒëŒ€ë¡œ ê·¸ëž˜í”„ íƒìƒ‰ì„ ë“¤ì–´ê°ˆ ë•Œ, í•´ë‹¹ ì§€ì ì˜ ê°’ì„ ìž„ì˜ë¡œ ë°”ê¿”ë†“ì•˜ë‹¤ê°€, íƒìƒ‰ì„ ë§ˆì¹  ë•Œ, ì›ëž˜ì˜ ê°’ìœ¼ë¡œ ì›ë³µí•´ë†“ìœ¼ë©´ ë™ì¼í•œ íš¨ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.
ë¬¸ì œì—ì„œ ë¬¸ìžì—´ì€ ì˜ë¬¸ ëŒ€ì†Œë¬¸ìžë¡œë§Œ êµ¬ì„±ëœë‹¤ê³  í–ˆìœ¼ë¯€ë¡œ, ìž„ì˜ë¡œ ê³µë°± ë¬¸ìžë¥¼ ì €ìž¥í•´ë‘ë©´ ë  ê²ƒìž…ë‹ˆë‹¤.

ê·¸ëŸ¼ ì§‘í•©ì„ ì‚¬ìš©í•˜ì§€ ì•Šê³  ìž…ë ¥ ê²©ìžì— ì €ìž¥ëœ ê°’ì„ ë³€ê²½í•˜ë„ë¡ ì½”ë“œë¥¼ ìˆ˜ì •í•´ë³´ê² ìŠµë‹ˆë‹¤.

```py
class Solution:
    def exist(self, board: List[List[str]], word: str) -> bool:
        n_rows, n_cols = len(board), len(board[0])

        def dfs(row, col, idx):
            if idx == len(word):
                return True
            if not (0 <= row < n_rows and 0 <= col < n_cols):
                return False
            if board[row][col] != word[idx]:
                return False

            temp = board[row][col]
            board[row][col] = ""
            result = any(
                [
                    dfs(row - 1, col, idx + 1),
                    dfs(row + 1, col, idx + 1),
                    dfs(row, col - 1, idx + 1),
                    dfs(row, col + 1, idx + 1),
                ]
            )
            board[row][col] = temp
            return result

        return any(dfs(r, c, 0) for r in range(n_rows) for c in range(n_cols))
```

ì´ í’€ì´ëŠ” ì§‘í•©ì— ë°©ë¬¸ ê²½ë¡œë¥¼ ì €ìž¥í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ ê³µê°„ ë³µìž¡ë„ê°€ í–¥ìƒë  ê±°ë¼ê³  ìƒê°í•  ìˆ˜ ìžˆëŠ”ë°ìš”.
ì‚¬ì‹¤ ìž¬ê·€ í•¨ìˆ˜ì˜ í˜¸ì¶œ ìŠ¤íƒì´ ë¬¸ìžì—´ì˜ ê¸¸ì´ì™€ ë¹„ë¡€í•´ì„œ ê¹Šì–´ì§€ê¸° ë•Œë¬¸ì— ì—¬ì „ížˆ ê³µê°„ ë³µìž¡ë„ëŠ” `O(w)`ìž…ë‹ˆë‹¤.
