---
title: "Number of Provinces"
tags:
  - leetcode
  - array
  - matrix
  - graph
  - dfs
  - recursion
  - stack
  - set
  - python
date: 2023-07-14
---

LeetCodeì˜ 547ë²ˆì§¸ ë¬¸ì œì¸ [Number of Provinces](https://leetcode.com/problems/number-of-provinces/)ë¥¼ í•¨ê»˜ í’€ì–´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.

## ë¬¸ì œ

ë„ì‹œê°€ nê°œê°€ ìˆìŠµë‹ˆë‹¤.
ì¼ë¶€ëŠ” ì—°ê²°ë˜ì–´ ìˆê³ , ì¼ë¶€ëŠ” ê·¸ë ‡ì§€ ì•ŠìŠµë‹ˆë‹¤.
ë„ì‹œ aê°€ ì§ì ‘ì ìœ¼ë¡œ ë„ì‹œ bì™€ ì—°ê²°ë˜ì–´ ìˆê³ , ë„ì‹œ bê°€ ì§ì ‘ì ìœ¼ë¡œ ë„ì‹œ cì™€ ì—°ê²°ë˜ì–´ ìˆë‹¤ë©´, ë„ì‹œ aëŠ” ë„ì‹œ cì™€ ê°„ì ‘ì ìœ¼ë¡œ ì—°ê²°ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

ì§ì ‘ ë˜ëŠ” ê°„ì ‘ì ìœ¼ë¡œ ì—°ê²°ëœ ë„ì‹œì˜ ê·¸ë£¹ì„ ë„(province)ë¼ê³  í•©ë‹ˆë‹¤.
ë„ì‹œë“¤ì˜ ì—°ê²° ì •ë³´ë¥¼ ë‚˜íƒ€ë‚´ëŠ” n x n í–‰ë ¬ isConnectedê°€ ì£¼ì–´ì§‘ë‹ˆë‹¤.
`isConnected[i][j] = 1`ì´ë©´ `i`ë²ˆì§¸ ë„ì‹œì™€ `j`ë²ˆì§¸ ë„ì‹œê°€ ì§ì ‘ ì—°ê²°ë˜ì–´ ìˆìŒì„ ì˜ë¯¸í•˜ê³ , `isConnected[i][j] = 0`ì´ë©´ ê·¸ë ‡ì§€ ì•ŠìŒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.

ì „ì²´ provinceì˜ ì´ ê°œìˆ˜ë¥¼ ë°˜í™˜í•˜ì‹œì˜¤.

## ì˜ˆì œ

```py
Input: isConnected = [[1,1,0],[1,1,0],[0,0,1]]
Output: 2
```

```py
Input: isConnected = [[1,0,0],[0,1,0],[0,0,1]]
Output: 3
```

## í’€ì´ 1

ì£¼ì–´ì§„ í–‰ë ¬ì—ì„œ ëª‡ ê°œì˜ ë„(province)ê°€ ìˆëŠ”ì§€ ì•Œì•„ë‚´ë ¤ë©´, ì„œë¡œ ì—°ê²°ë˜ì–´ ìˆëŠ” ë„ì‹œì˜ ê·¸ë£¹ì„ ì°¾ì•„ì•¼í•©ë‹ˆë‹¤.
ê·¹ë‹¨ì ì¸ ì˜ˆë¡œ, ë„ì‹œê°€ í•˜ë‚˜ë„ ì—°ê²°ë˜ì–´ ìˆì§€ ì•Šë‹¤ë©´ ê° ë„ì‹œ ìì²´ê°€ ë„ê°€ ë˜ì–´ ë„ì˜ ê°œìˆ˜ê°€ `n`ì´ ë˜ê³ , ë°˜ëŒ€ë¡œ ëª¨ë“  ë„ì‹œê°€ ì—°ê²°ë˜ì–´ ìˆë‹¤ë©´ ë„ì˜ ê°œìˆ˜ëŠ” 1ì´ ë  ê²ƒì…ë‹ˆë‹¤.

ë„ì‹œì˜ ê·¸ë£¹ í•˜ë‚˜ë¥¼ ì°¾ìœ¼ë ¤ë©´ ê·¸ ì•ˆì— ì—°ê²°ë˜ì–´ ìˆëŠ” ë„ì‹œë¥¼ ëª¨ë‘ ì°¾ì•„ì•¼í•˜ëŠ”ë°ìš”.
ì—¬ê¸°ì„œ ë„ì‹œë¥¼ ì •ì (vertex)ì´ë¼ê³  ë³´ê³ , ë„ì‹œ ì‚¬ì´ì˜ ì—°ê²°ì„ ê°„ì„ (edge)ë¼ê³  ë³´ë©´, ìš°ë¦¬ëŠ” ê·¸ë˜í”„(graph) íƒìƒ‰ìœ¼ë¡œ ì´ ë¬¸ì œì— ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ê°ê°ì˜ ë„ì‹œ ê·¸ë£¹ì´ ì–¼ë§ˆë‚˜ í°ì§€ëŠ” í•´ë‹¹ ê·¸ë£¹ ì•ˆì— ëª¨ë“  ë„ì‹œë¥¼ íƒìƒ‰í•  ë•Œ ê¹Œì§€ëŠ” ì•Œ ìˆ˜ ì—†ê² ì£ ?
ë”°ë¼ì„œ, ì£¼ì–´ì§„ ê·¸ë˜í”„ë¥¼ ê¹Šì´ ìš°ì„  íƒìƒ‰í•˜ë“  ë„ˆë¹„ ìš°ì„  íƒìƒ‰í•˜ëŠ” ì§€ëŠ” ë³„ë¡œ ì¤‘ìš”í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

ëŒ€ì‹  ì¤‘ìš”í•œ ê²ƒì€ íƒìƒ‰í•  ë•Œ í•œ ë²ˆ ë°©ë¬¸í•œ ë„ì‹œëŠ” ë‹¤ì‹œ ë°©ë¬¸í•˜ë©´ ì•ˆ ëœë‹¤ëŠ” ê²ƒì¸ë°ìš”.
ì§‘í•©(set) ìë£Œ êµ¬ì¡°ë¥¼ ì´ìš©í•˜ì—¬ ë°©ë¬¸í•œ ë„ì‹œë¥¼ ì‰½ê²Œ ì¶”ì í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ê·¸ëŸ¼ ì²« ë²ˆì§¸ ì˜ˆì œë¥¼ ê°€ì§€ê³  ì¤‘ë³µ ë°©ë¬¸ì— ì£¼ì˜í•˜ë©´ì„œ ê¹Šì´ ìš°ì„  íƒìƒ‰ì„ ê°™ì´ í•´ë³¼ê¹Œìš”?

ìš°ì„  ë„ì‹œ `0`ê³¼ ì—°ê²°ëœ ëª¨ë“  ë„ì‹œë¥¼ íƒìƒ‰í•´ë³´ê² ìŠµë‹ˆë‹¤.
ë„ì‹œ `0`ê³¼ ë„ì‹œ `0`ì€ ë‹¹ì—°íˆ ì—°ê²°ë˜ì–´ ìˆê³ , ìš°ë¦¬ëŠ” ì ì–´ë„ ë„ê°€ 1ê°œëŠ” ìˆë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```py
   0  1  2
0 [1, 1, 0] ğŸ‘ˆ
   ğŸ‘†
1 [1, 1, 0]
2 [0, 0, 1]

ë„ì˜ ê°œìˆ˜: 0 + 1 = 1
ë°©ë¬¸í•œ ë„ì‹œ: {} + {0} = {0}
```

ë„ì‹œ `0`ê³¼ ë„ì‹œ `1`ì€ ì—°ê²°ë˜ì–´ ìˆìœ¼ë¯€ë¡œ, ë„ì‹œ `1`ì€ ë„ì‹œ `0`ê³¼ ê°™ì€ ê·¸ë£¹ì— ë“¤ì–´ê°‘ë‹ˆë‹¤.

```py
   0  1  2
0 [1, 1, 0] ğŸ‘ˆ
      ğŸ‘†
1 [1, 1, 0]
2 [0, 0, 1]

ë„ì˜ ê°œìˆ˜: 1
ë°©ë¬¸í•œ ë„ì‹œ: {0} + {1} = {0, 1}
```

ê¹Šì´ ìš°ì„  íƒìƒ‰ì„ ìœ„í•´ì„œ ì ì‹œ ë„ì‹œ `0`ê³¼ ì—°ê²°ëœ ë„ì‹œì— ëŒ€í•œ íƒìƒ‰ì„ ë©ˆì¶”ê³ , ë„ì‹œ `1`ê³¼ ì—°ê²°ëœ ë„ì‹œë¥¼ ë¨¼ì € íƒìƒ‰í•˜ê² ìŠµë‹ˆë‹¤.
ë„ì‹œ `1`ê³¼ ì—°ê²°ëœ ë„ì‹œ `0`ê³¼ ë„ì‹œ `1`, ë‘ ê°œì¸ë° ëª¨ë‘ ë„ì‹œ `0`ì„ íƒìƒ‰í•  ë•Œ ì´ë¯¸ ë°©ë¬¸í–ˆê¸° ë•Œë¬¸ì— ê±´ë„ˆ ëœë‹ˆë‹¤.
ë„ì‹œ `1`ê³¼ ë„ì‹œ `2`ëŠ” ì—°ê²°ë˜ì–´ ìˆì§€ ì•ŠìŠµë‹ˆë‹¤.

```py
   0  1  2
0 [1, 1, 0] ğŸ‘ˆ
1 [1, 1, 0] ğŸ‘ˆ
         ğŸ‘†
2 [0, 0, 1]

ë„ì˜ ê°œìˆ˜: 1
ë°©ë¬¸í•œ ë„ì‹œ: {0, 1}
```

ë„ì‹œ `1`ê³¼ ì—°ê²°ëœ ë„ì‹œì— ëŒ€í•œ íƒìƒ‰ì„ ë§ˆì³¤ìœ¼ë‹ˆ, ë„ì‹œ `0`ìœ¼ë¡œ ë‹¤ì‹œ ëŒì•„ì™€ì„œ ë©ˆì·„ë˜ íƒìƒ‰ì„ ì¬ê°œí•©ë‹ˆë‹¤.
ë„ì‹œ `0`ê³¼ ë„ì‹œ `2`ëŠ” ì—°ê²°ë˜ì–´ ìˆì§€ ì•ŠìŠµë‹ˆë‹¤.

```py
   0  1  2
0 [1, 1, 0] ğŸ‘ˆ
         ğŸ‘†
1 [1, 1, 0]
2 [0, 0, 1]

ë„ì˜ ê°œìˆ˜: 1
ë°©ë¬¸í•œ ë„ì‹œ: {0, 1}
```

ë„ì‹œ `1`ì€ ë°©ê¸ˆ ë°©ë¬¸í•˜ì˜€ìœ¼ë‹ˆ ê±´ë„ˆ ë›°ê³ , ë„ì‹œ `2`ì™€ ì—°ê²°ëœ ë„ì‹œë¥¼ íƒìƒ‰í•˜ê² ìŠµë‹ˆë‹¤.
ë„ì‹œ `2`ëŠ” ìê¸° ìì‹  ì™¸ì— ë‹¤ë¥¸ ë„ì‹œì™€ëŠ” ì—°ê²°ë˜ì–´ ìˆì§€ ì•Šìœ¼ë¯€ë¡œ, í˜¼ìì„œ í•˜ë‚˜ì˜ êµ¬ë¥¼ ì´ë£¹ë‹ˆë‹¤.

```py
   0  1  2
0 [1, 1, 0]
1 [1, 1, 0]
2 [0, 0, 1] ğŸ‘ˆ
         ğŸ‘†

ë„ì˜ ê°œìˆ˜: 1 + 1 = 2
ë°©ë¬¸í•œ ë„ì‹œ: {0, 1} + {2} = {0, 1, 2}
```

ì´ ê¹Šì´ ìš°ì„  íƒìƒ‰ ì•Œê³ ë¦¬ì¦˜ì„ ì¬ê·€ í•¨ìˆ˜ë¥¼ ì´ìš©í•˜ì—¬ íŒŒì´ì¬ìœ¼ë¡œ êµ¬í˜„í•´ë³´ê² ìŠµë‹ˆë‹¤.

```py
class Solution:
    def findCircleNum(self, isConnected: List[List[int]]) -> int:
        def dfs(node):
            visited.add(node)
            for adj, connected in enumerate(isConnected[node]):
                if adj not in visited and connected == 1:
                    dfs(adj)

        cnt = 0
        visited = set()
        for node in range(len(isConnected)):
            if node not in visited:
                cnt += 1
                dfs(node)

        return cnt
```

`n`ì„ ë„ì‹œì˜ ê°œìˆ˜ë¼ê³  í–ˆì„ ë•Œ, ì´ í’€ì´ì˜ ì‹œê°„ ë³µì¡ë„ëŠ” í–‰ë ¬ì˜ í¬ê¸°ì™€ ë¹„ë¡€í•´ì„œ `O(n^2)`ì´ ë©ë‹ˆë‹¤.
ê³µê°„ ë³µì¡ë„ëŠ” ì„¸íŠ¸ê°€ `n`ì— ë¹„ë¡€í•˜ëŠ” ë©”ëª¨ë¦¬ë¥¼ ì¶”ê°€ì ìœ¼ë¡œ ì‚¬ìš©í•˜ë¯€ë¡œ `O(n)`ì´ ë©ë‹ˆë‹¤.

## í’€ì´ 2

ì…ë ¥ìœ¼ë¡œ ì£¼ì–´ì§„ í–‰ë ¬ ë‚´ì˜ ê°’ì„ ë³€ê²½í•  ìˆ˜ ìˆë‹¤ë©´, êµ³ì´ ì„¸íŠ¸ì™€ ê°™ì€ ì¶”ê°€ ìë£Œêµ¬ì¡°ê°€ í•„ìš”í•˜ì§€ ì•Šì„ ê²ƒì…ë‹ˆë‹¤.
ì…ë ¥ í–‰ë ¬ ë‚´ì—ì„œ íƒìƒ‰ì„ ë§ˆì¹œ ì—°ê²°ì— ëŒ€í•œ `0`ìœ¼ë¡œ ë³€ê²½í•˜ë©´, í•´ë‹¹ ì—°ê²°ì„ ë‹¤ì‹œ ê³ ë ¤ë˜ëŠ” ê²ƒì„ ë°©ì§€í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.
ì˜ˆë¥¼ ë“¤ì–´, ë„ì‹œ `x`ì„ ë°©ë¬¸í–ˆë‹¤ë©´, `isConnected[x][x]`ì„ `0`ìœ¼ë¡œ ë³€ê²½í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.

ê·¸ëŸ¼ ì…ë ¥ í–‰ë ¬ì„ ë³€ê²½í•˜ë©´ì„œ ì²« ë²ˆì§¸ ì˜ˆì œë¥¼ ê°€ì§€ê³  ê¹Šì´ ìš°ì„  íƒìƒ‰ì„ í•´ë³¼ê¹Œìš”?

ë„ì‹œ `0`ê³¼ ë„ì‹œ `0`ì€ ë‹¹ì—°íˆ ì—°ê²°ë˜ì–´ ìˆìœ¼ë¯€ë¡œ, `isConnected[0][0]`ì„ `0`ìœ¼ë¡œ ë³€ê²½í•©ë‹ˆë‹¤.

```py
   0  1  2
0 [0, 1, 0] ğŸ‘ˆ
   ğŸ‘†
1 [1, 1, 0]
2 [0, 0, 1]

ë„ì˜ ê°œìˆ˜: 0 + 1 = 1
```

ë„ì‹œ `0`ê³¼ ë„ì‹œ `1`ì€ ì—°ê²°ë˜ì–´ ìˆìœ¼ë¯€ë¡œ, `isConnected[1][1]`ì„ `0`ìœ¼ë¡œ ë³€ê²½í•©ë‹ˆë‹¤.

```py
   0  1  2
0 [0, 1, 0] ğŸ‘ˆ
      ğŸ‘†
1 [1, 0, 0]
2 [0, 0, 1]

ë„ì˜ ê°œìˆ˜: 1
```

ê¹Šì´ ìš°ì„  íƒìƒ‰ì„ ìœ„í•´ì„œ ì ì‹œ ë„ì‹œ `0`ê³¼ ì—°ê²°ëœ ë„ì‹œì— ëŒ€í•œ íƒìƒ‰ì„ ë©ˆì¶”ê³ , ë„ì‹œ `1`ê³¼ ì—°ê²°ëœ ë„ì‹œë¥¼ ë¨¼ì € íƒìƒ‰í•´ì•¼ í•©ë‹ˆë‹¤.
`isConnected[0][0]`ê³¼ `isConnected[1][1]`ì´ ëª¨ë‘ `0`ì´ê¸° ë•Œë¬¸ì—, ë°”ë¡œ ë„ì‹œ `2`ë¡œ ê±´ë„ˆ ëŒ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ë„ì‹œ `1`ê³¼ ë„ì‹œ `2`ëŠ” ì—°ê²°ë˜ì–´ ìˆì§€ ì•Šìœ¼ë¯€ë¡œ, ë‹¤ì‹œ ë„ì‹œ `0`ìœ¼ë¡œ ëŒì•„ì™€ ë©ˆì·„ë˜ íƒìƒ‰ì„ ì¬ê°œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```py
   0  1  2
0 [0, 1, 0] ğŸ‘ˆ
1 [1, 0, 0] ğŸ‘ˆ
         ğŸ‘†
2 [0, 0, 1]

ë„ì˜ ê°œìˆ˜: 1
```

ë„ì‹œ `0`ê³¼ ë„ì‹œ `2`ëŠ” ì—°ê²°ë˜ì–´ ìˆì§€ ì•ŠìŠµë‹ˆë‹¤.

```py
   0  1  2
0 [0, 1, 0] ğŸ‘ˆ
         ğŸ‘†
1 [1, 0, 0]
2 [0, 0, 1]

ë„ì˜ ê°œìˆ˜: 1
```

`isConnected[1][1]`ì€ `0`ì´ë‹ˆ ì´ë¯¸ ë°©ë¬¸í–ˆë‹¤ëŠ” ëœ»ì´ë¯€ë¡œ ê±´ë„ˆ ë›°ê³ , ë„ì‹œ `2`ì™€ ì—°ê²°ëœ ë„ì‹œë¥¼ íƒìƒ‰í•˜ê¸° ìœ„í•´ì„œ `isConnected[2][2]`ë¥¼ `0`ìœ¼ë¡œ ë³€ê²½í•˜ê² ìŠµë‹ˆë‹¤.
ë„ì‹œ `2`ëŠ” ìê¸° ìì‹  ì™¸ì— ë‹¤ë¥¸ ë„ì‹œì™€ëŠ” ì—°ê²°ë˜ì–´ ìˆì§€ ì•Šìœ¼ë¯€ë¡œ, í˜¼ìì„œ í•˜ë‚˜ì˜ êµ¬ë¥¼ ì´ë£¹ë‹ˆë‹¤.

```py
   0  1  2
0 [0, 1, 0]
1 [1, 0, 0]
2 [0, 0, 0] ğŸ‘ˆ
         ğŸ‘†

ë„ì˜ ê°œìˆ˜: 1 + 1 = 2
```

ì´ ì‚´ì§ ë³€í˜•ëœ ê¹Šì´ ìš°ì„  íƒìƒ‰ ì•Œê³ ë¦¬ì¦˜ì„ íŒŒì´ì¬ìœ¼ë¡œ êµ¬í˜„í•´ë³¼ê¹Œìš”?

```py
class Solution:
    def findCircleNum(self, isConnected: List[List[int]]) -> int:
        def dfs(node):
            isConnected[node][node] = 0
            for adj, connected in enumerate(isConnected[node]):
                if isConnected[adj][adj] == 1 and connected == 1:
                    dfs(adj)

        cnt = 0
        for node in range(len(isConnected)):
            if isConnected[node][node] == 1:
                cnt += 1
                dfs(node)

        return cnt
```

ì´ í’€ì´ì˜ ì‹œê°„ ë³µì¡ë„ì™€ ê³µê°„ ë³µì¡ë„ëŠ” ì´ì „ í’€ì´ì™€ ë™ì¼í•©ë‹ˆë‹¤.
ì„¸íŠ¸ ìë£Œêµ¬ì¡°ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ ê³µê°„ ë³µì¡ë„ê°€ í–¥ìƒë  ê±°ë¼ê³  ìƒê°í•  ìˆ˜ ìˆëŠ”ë°,
ì¬ê·€ ì•Œê³ ë¦¬ì¦˜ì€ ê³µê°„ ë³µì¡ë„ëŠ” í˜¸ì¶œ ìŠ¤íƒì˜ ê¹Šì´ì— ë¹„ë¡€í•˜ë¯€ë¡œ ì—¬ì „íˆ `O(n)`ì…ë‹ˆë‹¤.

## í’€ì´ 3: ìŠ¤íƒ

ê·¸ë˜í”„ì˜ ê¹Šì´ ìš°ì„  íƒìƒ‰ì€ ìŠ¤íƒì„ ì´ìš©í•˜ë©´ ë°˜ë³µ ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œë„ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```py
class Solution:
    def findCircleNum(self, isConnected: List[List[int]]) -> int:
        cnt = 0
        for node in range(len(isConnected)):
            if isConnected[node][node] == 1:
                cnt += 1
                stack = [node]
                while stack:
                    node = stack.pop()
                    isConnected[node][node] = 0
                    for adj, connected in enumerate(isConnected[node]):
                        if isConnected[adj][adj] == 1 and connected == 1:
                            stack.append(adj)
        return cnt
```

## ë§ˆì¹˜ë©´ì„œ

ì½”ë”© ì‹œí—˜ì—ì„œ ê·¸ë˜í”„(graph)ì„ ë‹¤ë£¨ëŠ” ìœ í˜•ì˜ ë¬¸ì œì—ì„œëŠ” ì´ ë¬¸ì œê°€ ê°€ì¥ ê¸°ë³¸ì´ ëœë‹¤ê³  ë³¼ ìˆ˜ ìˆëŠ”ë°ìš”.
ë³¸ ë¬¸ì œë¥¼ í†µí•´ ê¸°ë³¸ê¸°ë¥¼ ì˜ ë‹¦ì•„ë†“ìœ¼ì…”ì„œ ê°™ì€ ìœ í˜•ì˜ ì¢€ ë” ì–´ë ¤ìš´ ë¬¸ì œë¥¼ í’€ ë•Œ í° ë„ì›€ì´ ë˜ì—ˆìœ¼ë©´ ì¢‹ê² ìŠµë‹ˆë‹¤.

ì´ ë¬¸ì œê°€ ë„ˆë¬´ ì‰¬ìš°ì…¨ë‹¤ë©´ ë¹„ìŠ·í•˜ì§€ë§Œ ì¢€ ë” ì–´ë ¤ìš´ ë¬¸ì œì¸ [Number of Islands](/problems/number-of-islands/)ë„ í’€ì–´ë³´ì‹œë¼ê³  ì¶”ì²œë“œë¦½ë‹ˆë‹¤.
ì½”ë”© í…ŒìŠ¤íŠ¸ì—ì„œ ê·¸ë˜í”„ ìë£Œêµ¬ì¡°ë¥¼ ì–´ë–»ê²Œ ë‹¤ë£¨ëŠ”ì§€ì— ëŒ€í•´ì„œ ë” ê³µë¶€í•˜ê³  ì‹¶ìœ¼ì‹œë‹¤ë©´ [ê´€ë ¨ ê²Œì‹œë¬¼](/data-structures/graph/)ì„ ì°¸ê³  ë°”ë„ê»˜ìš”.
