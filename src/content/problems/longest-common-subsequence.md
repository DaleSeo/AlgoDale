---
title: "Longest Common Subsequence"
tags:
  - leetcode
  - string
  - sequence
  - recursion
  - memoization
  - dp
  - python
date: 2022-10-13
---

<iframe width="560" height="315" src="https://www.youtube.com/embed/OdrC-Zhw6sw?si=CTB_0USdLDXXaKjA" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>

LeetCodeì˜ 1143ë²ˆì§¸ ë¬¸ì œì¸ [Longest Common Sequence](https://leetcode.com/problems/longest-common-subsequence/)ë¥¼ í•¨ê»˜ í’€ì–´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.

## ë¬¸ì œ

ë‘ ê°œì˜ ë¬¸ìžì—´ `text1`ê³¼ `text2`ê°€ ì£¼ì–´ì¡Œì„ ë•Œ ë‘ ë¬¸ìžì—´ì˜ ê°€ìž¥ ê¸´ ê³µí†µ ë¶€ë¶„ ìˆ˜ì—´ì˜ ê¸¸ì´ë¥¼ ë°˜í™˜í•˜ì‹œì˜¤.
ê³µí†µ ë¶€ë¶„ ìˆ˜ì—´ì´ ì—†ëŠ” ê²½ìš°ì—ëŠ” `0`ì„ ë°˜í™˜í•˜ì‹œì˜¤.

ë¬¸ìžì—´ì˜ ë¶€ë¶„ ìˆ˜ì—´ì€ ì›ëž˜ ë¬¸ìžì—´ì—ì„œ ì¼ë¶€ ê¸€ìžë“¤ì„ ì‚­ì œí•˜ë˜ ë‚¨ì€ ë¬¸ìžë“¤ì˜ ìƒëŒ€ì ì¸ ìˆœì„œë¥¼ ë°”ê¾¸ì§€ ì•Šì€ ìƒˆë¡œìš´ ë¬¸ìžì—´ìž…ë‹ˆë‹¤.

ì˜ˆë¥¼ ë“¤ì–´, `ace`ëŠ” `abcde`ì˜ ë¶€ë¶„ ìˆ˜ì—´ìž…ë‹ˆë‹¤.

ë‘ ë¬¸ìžì—´ì˜ ê³µí†µ ë¶€ë¶„ ìˆ˜ì—´ì€ ë‘ ë¬¸ìžì—´ ëª¨ë‘ì— ê³µí†µìœ¼ë¡œ ìžˆëŠ” ë¶€ë¶„ ìˆ˜ì—´ìž…ë‹ˆë‹¤.

## ì˜ˆì œ

```py
ìž…ë ¥: text1 = "abcde", text2 = "ace"
ì¶œë ¥: 3
```

```py
ìž…ë ¥: text1 = "abc", text2 = "abc"
ì¶œë ¥: 3
```

```py
ìž…ë ¥: text1 = "abc", text2 = "def"
ì¶œë ¥: 0
```

## í’€ì´ 1: ìž¬ê·€

ë¬¸ì œì—ì„œ ì£¼ì–´ì§„ ì²« ë²ˆì§¸ ì˜ˆì œë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì–´ë–»ê²Œ ê°€ìž¥ ê¸´ ê³µí†µ ë¶€ë¶„ ìˆ˜ì—´ì˜ ê¸¸ì´ë¥¼ êµ¬í•  ìˆ˜ ìžˆëŠ”ì§€ ìƒê°ì„ í•´ë³´ê² ìŠµë‹ˆë‹¤.

ìš°ì„  ë‘ ë¬¸ìžì—´ì˜ ì²« ë²ˆì§¸ ê¸€ìžë¥¼ ë¹„êµí•´ë³´ë©´ `a`ì™€ `a`ë¡œ ì¼ì¹˜í•˜ëŠ”ë°ìš”.
ì´ ê¸€ìž ìžì²´ê°€ ê³µí†µ ë¶€ë¶„ ìˆ˜ì—´ì´ ë  ìˆ˜ ìžˆìœ¼ë¯€ë¡œ ê°€ìž¥ ê¸´ ê³µí†µ ë¶€ë¶„ ìˆ˜ì—´ì˜ ê¸¸ì´ëŠ” ìµœì†Œ `1`ì´ë¼ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.

```
_____
abcde
___
ace
```

ì¼ì¹˜í•˜ëŠ” `a`ë¥¼ ì œì™¸í•˜ê³  ë‚¨ì€ ë‘ ë¶€ë¶„ ë¬¸ìžì—´ì„ ì´ë™í•´ë³´ë©´, ì´ ë²ˆì—ëŠ” ì²« ë²ˆì§¸ ê¸€ìžê°€ `b`ì™€ `c`ë¡œ ì¼ì¹˜í•˜ì§€ ì•ŠëŠ”ë°ìš”.
ì—¬ê¸°ì„œ ìš°ë¦¬ì—ê²ŒëŠ” ë‘ ê°€ì§€ ì„ íƒ ì‚¬í•­ì´ ìƒê¹ë‹ˆë‹¤.

```
  ____
a bcde
  __
a ce
```

ì²« ë²ˆì§¸ ì˜µì…˜ì€ ì²« ë²ˆì§¸ ë¶€ë¶„ ë¬¸ìžì—´ì˜ ì²« ë²ˆì§¸ ê¸€ìžì¸ `b`ë¥¼ ì œì™¸í•˜ê³  ë‹¤ì‹œ ë¹„êµí•´ë³´ëŠ” ê²ƒìž…ë‹ˆë‹¤.
ì´ ê²½ìš°, ë‘ ë¶€ë¶„ ë¬¸ìžì—´ì˜ ì²« ë²ˆì§¸ ê¸€ìžê°€ `c`ì™€ `c`ë¡œ ì¼ì¹˜í•˜ê²Œ ë˜ì–´ ê°€ìž¥ ê³µí†µ ë¶€ë¶„ ìˆ˜ì—´ì´ `ac`ë¡œ ê¸¸ì–´ì§‘ë‹ˆë‹¤.

```
   ___
ab cde
   __
a  ce
```

ë‘ ë²ˆì§¸ ì˜µì…˜ì€ ë‘ ë²ˆì§¸ ë¶€ë¶„ ë¬¸ìžì—´ì˜ ì²« ë²ˆì§¸ ê¸€ìžì¸ `c`ë¥¼ ì œì™¸í•˜ê³  ë‹¤ì‹œ ë¹„êµí•´ë³´ëŠ” ê²ƒìž…ë‹ˆë‹¤.
ì´ ê²½ìš°, ë‘ ë¶€ë¶„ ë¬¸ìžì—´ì˜ ì²« ë²ˆì§¸ ê¸€ìžê°€ `b`ì™€ `e`ë¡œ ì¼ì¹˜í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ, ê³µí†µ ë¶€ë¶„ ìˆ˜ì—´ì˜ ê¸¸ì´ì— ì˜í–¥ì„ ì£¼ì§€ ì•Šìœ¼ë©°,
ìš°ë¦¬ì—ê²ŒëŠ” ë‹¤ì‹œ 2ê°€ì§€ ì„ íƒ ì‚¬í•­ì´ ìƒê¹ë‹ˆë‹¤.

```
   ____
a  bcde
   _
ac e
```

ì²« ë²ˆì§¸ ê²½ìš°, ë¶€ë¶„ ë¬¸ìžì—´ì˜ ì²« ê¸€ìžê°€ ì¼ì¹˜í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ, ì—¬ê¸°ì„œ ì¶”ê°€ì ìœ¼ë¡œ 2ê°€ì§€ ì„ íƒ ì‚¬í•­ì´ ìƒê¸°ê² ì£ ?
ì§€ê¸ˆê¹Œì§€ ê±°ì³¤ë˜ ë™ì¼í•œ ê³¼ì •ì„ ë°˜ë³µí•´ì•¼í•  ê²ƒìž…ë‹ˆë‹¤.

```
   ____
ab cde
   _
ac e
```

ë‘ ë²ˆì§¸ ê²½ìš°ì—ëŠ” ë‘ ë²ˆì§¸ ë¬¸ìžì—´ì´ ëì— ë‹¤ë‹¬ì•˜ìœ¼ë¯€ë¡œ ë” ì´ìƒ ë¹„êµí•  ê¸€ìžê°€ ì—†ê²Œ ë©ë‹ˆë‹¤.
ì—¬ê¸°ì„œ ê²½ë¡œëŠ” ë” ì´ìƒ ë“¤ì–´ê°ˆ ìˆ˜ê°€ ì—†ìŠµë‹ˆë‹¤.

```
   ____
a  bcde
   _
ace
```

ì§€ê¸ˆê¹Œì§€ ì‚¬ê³  ê³¼ì •ì„ ì‚´íŽ´ë³´ë©´ ì´ ë¬¸ì œëŠ” ìž¬ê·€ ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ í•´ê²°í•  ìˆ˜ ìžˆë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìžˆëŠ”ë°ìš”.
ë‘ ë¬¸ìžì—´ì˜ ì²« ê¸€ìžê°€ ë™ì¼í•˜ë‹¤ë©´ ê°€ìž¥ ê¸´ ê³µí†µ ë¶€ë¶„ì˜ ìˆ˜ì—´ì˜ ê¸¸ì´ë¥¼ `1` ì¦ê°€ ì‹œí‚¤ê³ , ë‘ ë¬¸ìžì—´ì—ì„œ ì²« ê¸€ìžë¥¼ ì œì™¸í•˜ê³  ë‚¨ì€ ë¬¸ìžì—´ì„ ìƒëŒ€ë¡œ ë¹„êµë¥¼ ê³„ì†í•´ì•¼í•©ë‹ˆë‹¤.
ë‘ ë¬¸ìžì—´ì˜ ì²« ê¸€ìžê°€ ë™ì¼í•˜ì§€ ì•Šë‹¤ë©´ ë‘ ë¬¸ìžì—´ì„ ë²ˆê°ˆì•„ ê°€ë©° ì²« ê¸€ìžë¥¼ ì œì™¸í•˜ê³  ì´ 2ë²ˆì˜ ë¹„êµë¥¼ í•´ì•¼í•©ë‹ˆë‹¤.

ê·¸ëŸ¼ ì´ ì•Œê³ ë¦¬ì¦˜ì„ ì½”ë“œë¡œ êµ¬í˜„í•´ë³´ê² ìŠµë‹ˆë‹¤.

```py
class Solution:
    def longestCommonSubsequence(self, text1: str, text2: str) -> int:
        def dfs(i, j):
            if i == len(text1) or j == len(text2):
                return 0
            if text1[i] == text2[j]:
                return 1 + dfs(i + 1, j + 1)
            return max(dfs(i + 1, j), dfs(i, j + 1))

        return dfs(0, 0)
```

ìž¬ê·€ ì•Œê³ ë¦¬ì¦˜ì˜ ì´í•´ë¥¼ ë•ê¸° ìœ„í•´ì„œ ì „ì²´ í˜¸ì¶œ ìŠ¤íƒì„ ì‹œê°í™”í•´ë³´ì•˜ìŠµë‹ˆë‹¤.

```py
"abcde", "ace" => 1 + 2 = 3
    "bcde", "ce" => MAX(2, 1) = 2
        "cde", "ce" => 1 + 1 = 2
            "de", "e" => MAX(1, 0) = 1
                "e", "e" => 1 + 0
                    "", "" => 0
                "de", "" => 0
        "bcde", "e" => MAX(1, 0) = 1
            "cde", "e" => MAX(1, 0) = 1
                "de", "e" => MAX(1, 0) = 1
                    "e", "e" => 1 + 0
                        "", "" => 0
                    "de", "" => 0
                "cde", "" => 0
            "bcde", "" => 0
```

ì²« ë²ˆì§¸ ë¬¸ìžì—´ì˜ ê¸¸ì´ë¥¼ `m`, ë‘ ë²ˆì§¸ ë¬¸ìžì—´ì˜ ê¸¸ì´ë¥¼ `n`ì´ë¼ê³  í–ˆì„ ë•Œ ì´ í’€ì´ì˜ ë³µìž¡ë„ëŠ” ì–´ë–»ê²Œ ë ê¹Œìš”?
ìž¬ê·€ í•¨ìˆ˜ ë‚´ì—ì„œ ìž¬ê·€ í˜¸ì¶œì´ ìµœëŒ€ ë‘ ë²ˆ ì¼ì–´ë‚  ìˆ˜ ìžˆê³ , ìµœì•…ì˜ ê²½ìš° ë‘ ë¬¸ìžì—´ ê°„ì— ì¼ì¹˜í•˜ëŠ” ê¸€ìžê°€ í•˜ë‚˜ë„ ì—†ì–´ì„œ í˜¸ì¶œ ìŠ¤íƒì´ ë‘ ë¬¸ìžì—´ì˜ ê¸¸ì´ì˜ ê³±ë§Œí¼ ê¹Šì–´ì§ˆ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.
ë”°ë¼ì„œ ì‹œê°„ ë³µìž¡ë„ëŠ” `O(2^(m * n))`ì´ê³ , ê³µê°„ ë³µìž¡ë„ëŠ” `O(m * n)`ì´ ë˜ê² ìŠµë‹ˆë‹¤.

## í’€ì´ 2: ë©”ëª¨ì´ì œì´ì…˜

ìœ„ì—ì„œ ì‹œê°í™”í•´ë“œë¦° í˜¸ì¶œ íŠ¸ë¦¬ë¥¼ ì‚´íŽ´ë³´ì‹œë©´ ì¤‘ë³µ ì—°ì‚°ì´ ê´€ì°°ì´ ë˜ëŠ”ë°ìš”.

ì˜ˆë¥¼ ë“¤ë©´, `cde`ì™€ `ce` ê°„ì— ê°€ìž¥ ê¸´ ê³µí†µ ë¶€ë¶„ ìˆ˜ì—´ì˜ ê¸¸ì´ë¥¼ êµ¬í•˜ê¸° ìœ„í•´ì„œ `de`ì™€ `e` ê°„ì— ê°€ìž¥ ê¸´ ê³µí†µ ë¶€ë¶„ ìˆ˜ì—´ì˜ ê¸¸ì´ë¥¼ êµ¬í•˜ëŠ”ë°ìš”.
`cde`ì™€ `e`ê°„ì— ê°€ìž¥ ê¸´ ê³µí†µ ë¶€ë¶„ ìˆ˜ì—´ì˜ ê¸¸ì´ë¥¼ êµ¬í•  ë•Œë„ ë™ì¼í•˜ê²Œ `de`ì™€ `e` ê°„ì— ê°€ìž¥ ê¸´ ê³µí†µ ë¶€ë¶„ ìˆ˜ì—´ì˜ ê¸¸ì´ë¥¼ êµ¬í•˜ê³  ìžˆìŠµë‹ˆë‹¤.

```py
"de", "e" => MAX(1, 0) = 1
    "e", "e" => 1 + 0
        "", "" => 0
    "de", "" => 0
```

[ë©”ëª¨ì´ì œì´ì…˜(Memoization)](/algorithms/memoization/) ê¸°ë²•ì„ í™œìš©í•˜ë©´ ìž¬ê·€ ì•Œê³ ë¦¬ì¦˜ì—ì„œ ì¤‘ë³µ ì—°ì‚°ì„ íš¨ê³¼ì ìœ¼ë¡œ ì œê±°í•  ìˆ˜ ìžˆëŠ”ë°ìš”.
ì´ ê²½ìš°, ìž¬ê·€ í•¨ìˆ˜ì˜ ì¸ìžë¡œ `de`ì™€ `e`ê°€ ë„˜ì–´ì™”ì„ ë•Œì˜ ê²°ê³¼ ê°’ì„ ì €ìž¥í•´ë‘ë©´, ìž¬ê·€ í•¨ìˆ˜ê°€ ë™ì¼í•œ ì¸ìžë¡œ í˜¸ì¶œì´ ë˜ì—ˆì„ ë•Œ ì €ìž¥í•´ë‘” ê°’ì„ ì‚¬ìš©í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.

ê·¸ëŸ¼ [í•´ì‹œ í…Œì´ë¸”(Hash Table)](/data-structures/hash-table/)ì— í˜¸ì¶œ ê²°ê³¼ë¥¼ ì €ìž¥í•´ë‘ê³  í™œìš©í•˜ë„ë¡ ì½”ë“œë¥¼ ìˆ˜ì •í•´ë³´ê² ìŠµë‹ˆë‹¤.

```py
class Solution:
    def longestCommonSubsequence(self, text1: str, text2: str) -> int:
        memo = {}

        def dfs(i, j):
            if (i, j) in memo:
                return memo[(i, j)]
            if i == len(text1) or j == len(text2):
                memo[(i, j)] = 0
            elif text1[i] == text2[j]:
                memo[(i, j)] = 1 + dfs(i + 1, j + 1)
            else:
                memo[(i, j)] = max(dfs(i + 1, j), dfs(i, j + 1))
            return memo[(i, j)]

        return dfs(0, 0)
```

ì°¸ê³ ë¡œ `@cache` ë°ì½”ë ˆì´í„°ë¥¼ ì‚¬ìš©í•˜ì‹œë©´ ì¢€ ë” ê°„íŽ¸í•˜ê²Œ ë©”ëª¨ì´ì œì´ì…˜ íš¨ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.

```py
from functools import cache

class Solution:
    def longestCommonSubsequence(self, text1: str, text2: str) -> int:
        @cache
        def dfs(i, j):
            if i == len(text1) or j == len(text2):
                return 0
            if text1[i] == text2[j]:
                return 1 + dfs(i + 1, j + 1)
            return max(dfs(i + 1, j), dfs(i, j + 1))

        return dfs(0, 0)
```

ì´ í’€ì´ì˜ ì‹œê°„ ë³µìž¡ë„ëŠ” ì¤‘ë³µ ì—°ì‚°ì´ ëª¨ë‘ ì œê±°ë˜ì–´ `O(m * n)`ë¡œ ëŒ€í­ í–¥ìƒë©ë‹ˆë‹¤.

## í’€ì´ 3: ë™ì  ê³„íšë²•

ì´ë²ˆì—ëŠ” ìž‘ì€ ë¬¸ì œë¶€í„° ìš°ì„  í•´ê²°í•˜ê³  ê·¸ ê²°ê³¼ ê°’ì„ í™œìš©í•˜ì—¬ ì ì§„ì ìœ¼ë¡œ í° ë¬¸ì œ í•´ê²°í•˜ëŠ” ìƒí–¥ì‹(bottom-up) ì ‘ê·¼ì„ í•´ë³´ë©´ ì–´ë–¨ê¹Œìš”?
ì¦‰, ë¶€ë¶„ ë¬¸ìžì—´ì˜ ê¸¸ì´ë¥¼ 0ë¶€í„° 1ì”© ì¦ê°€ì‹œí‚¤ë©´ì„œ ìµœì¢…ì ìœ¼ë¡œ ì „ì²´ ë¬¸ìžì—´ ê°„ì˜ ìµœìž¥ ê³µí†µ ìˆ˜ì—´ì˜ ê¸¸ì´ë¥¼ êµ¬í•˜ëŠ” ê²ƒìž…ë‹ˆë‹¤.

ì¦‰, ë¹ˆ ë¬¸ìžì—´ì´ ì£¼ì–´ì§„ ê²½ìš°ë¶€í„° ì‹œìž‘í•´ì„œ ì „ì²´ ë¬¸ì œì—´ì´ ì£¼ì–´ì§„ ê²½ìš°ê¹Œì§€ ê±°ìŠ¬ëŸ¬ ì˜¬ë¼ê°€ë©´ì„œ ê³„ì‚°ì„ í•˜ëŠ” ê²ƒìž…ë‹ˆë‹¤.
ì´ëŸ¬í•œ í’€ì´ ê¸°ë²•ì„ [ë™ì  ê³„íšë²•(Dynamic Programming)](/algorithms/dp/)ì´ë¼ê³  í•˜ì£ .

`text1`ì—ì„œ ì²˜ìŒ `r`ê°œì˜ ë¬¸ìžì™€ `text2`ì—ì„œ ì²˜ìŒ `c`ê°œì˜ ë¬¸ìž ì‚¬ì´ì— ìµœìž¥ ê³µí†µ ìˆ˜ì—´ì˜ ê¸¸ì´(LCS)ë¥¼ êµ¬í•˜ëŠ” ë°©ë²•ì—ëŠ” 2ê°€ì§€ ê²½ìš°ê°€ ìžˆìŠµë‹ˆë‹¤.

ê²½ìš° 1: `text1`ì˜ ë¶€ë¶„ ë¬¸ìžì—´ì˜ ë§ˆì§€ë§‰ ê¸€ìžì™€ `text2`ì˜ ë¶€ë¶„ ë¬¸ìžì—´ì˜ ë§ˆì§€ë§‰ ê¸€ìžê°€ ê°™ë‹¤ë©´,

- ìµœìž¥ ê³µí†µ ìˆ˜ì—´ ê¸¸ì´ `1`ì€ ìš°ì„  í™•ë³´í•˜ì˜€ìŠµë‹ˆë‹¤.
- `text1`ì˜ ë¶€ë¶„ ë¬¸ìžì—´ê³¼ `text2`ì˜ ë¶€ë¶„ ë¬¸ìžì—´ì—ì„œ ë§ˆì§€ë§‰ ê¸€ìžë¥¼ ì œì™¸í•˜ê³  ìµœìž¥ ê³µí†µ ìˆ˜ì—´ ê¸¸ì´ë¥¼ êµ¬í•©ë‹ˆë‹¤.
- ë”°ë¼ì„œ `1`ê³¼ ìœ„ ê³„ì‚° ê²°ê³¼ë¥¼ ë”í•©ë‹ˆë‹¤.

```py
"ðŸ”´A"ì™€ "ðŸŸ¢A" ì‚¬ì´ì˜ LCS = 1 + "ðŸ”´"ì™€ "ðŸŸ¢" ì‚¬ì´ì˜ LCS
```

ê²½ìš° 2: `text1`ì˜ ë¶€ë¶„ ë¬¸ìžì—´ì˜ ë§ˆì§€ë§‰ ê¸€ìžì™€ `text2`ì˜ ë¶€ë¶„ ë¬¸ìžì—´ì˜ ë§ˆì§€ë§‰ ê¸€ìžê°€ ë‹¤ë¥´ë‹¤ë©´,

- ì²« ë²ˆì§¸ ë¶€ë¶„ ë¬¸ìžì—´ì„ ê·¸ëŒ€ë¡œ ë‘ê³  `text2`ì˜ ë¶€ë¶„ ë¬¸ìžì—´ì˜ ë§ˆì§€ë§‰ ê¸€ìžë¥¼ ì œê±°í•˜ê³  ìµœìž¥ ê³µí†µ ìˆ˜ì—´ ê¸¸ì´ë¥¼ êµ¬í•©ë‹ˆë‹¤.
- ì²« ë²ˆì§¸ ë¶€ë¶„ ë¬¸ìžì—´ì˜ ë§ˆì§€ë§‰ ê¸€ìžë¥¼ ì œê±°í•˜ê³  `text2`ì˜ ë¶€ë¶„ ë¬¸ìžì—´ì„ ê·¸ëŒ€ë¡œ ë‘ê³  ìµœìž¥ ê³µí†µ ìˆ˜ì—´ ê¸¸ì´ë¥¼ êµ¬í•©ë‹ˆë‹¤.
- ìœ„ ë‘ ê°œì˜ ê°’ì„ ë¹„êµí•˜ì—¬ ë” í° ê°’ì„ ì„ íƒí•©ë‹ˆë‹¤.

```py
"ðŸ”´A"ì™€ "ðŸŸ¢B" ì‚¬ì´ì˜ LCS = MAX("ðŸ”´A"ì™€ "ðŸŸ¢" ì‚¬ì´ì˜ LCS, "ðŸ”´"ì™€ "ðŸŸ¢B" ì‚¬ì´ì˜ LCS)
```

ìœ„ ë‘ ê²½ìš°ë¥¼ ë‹¤ì‹œ ì •ë¦¬í•´ì„œ ìˆ˜ì‹ìœ¼ë¡œ ë‚˜íƒ€ë‚´ë³´ë©´ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

`dp[r][c]`ë¥¼ `text1`ì—ì„œ ì²˜ìŒ `r`ê°œì˜ ë¬¸ìžì™€ `text2`ì—ì„œ ì²˜ìŒ `c`ê°œì˜ ë¬¸ìž ì‚¬ì´ì— ìµœìž¥ ê³µí†µ ìˆ˜ì—´ì˜ ê¸¸ì´ë¼ê³  ê°€ì •í•˜ë©´,

- `text1[r - 1]`ê³¼ `text1[c - 1]`ì´ ê°™ì€ ë¬¸ìžì´ë©´, `dp[r][c]`ëŠ” `1 + dp[r - 1][c - 1]`ì´ ëœë‹¤.
- `text1[r - 1]`ê³¼ `text2[c - 1]`ì´ ë‹¤ë¥¸ ë¬¸ìžì´ë©´, `dp[r][c]`ëŠ” `1 + max(dp[r - 1][c], dp[r][c - 1])`ì´ ëœë‹¤.

ë¬¸ì œì—ì„œ ì£¼ì–´ì§„ ì²« ë²ˆì§¸ ì˜ˆì œë¥¼ ìƒê°ì„ í•´ë³´ë©´ ë‹¤ìŒê³¼ ê°™ì€ ëª¨ìŠµì˜ ì´ì°¨ì› ë°°ì—´ì´ ë§Œë“¤ì–´ì§ˆ ê²ƒìž…ë‹ˆë‹¤.
`0`ê°œì˜ ë¬¸ìžë¶€í„° ë”°ì§€ê¸° ë•Œë¬¸ì— ì´ì°¨ì› ë°°ì—´ì˜ í–‰ì˜ ìˆ˜ê°€ ì²« ë²ˆì§¸ ë¬¸ìžì—´ì˜ ê¸¸ì´ë³´ë‹¤ 1ì´ í¬ê³ , ì—´ì˜ ìˆ˜ê°€ ë‘ ë²ˆì§¸ ë¬¸ìžì—´ì˜ ê¸¸ì´ê°€ 1ë³´ë‹¤ ì»¤ì•¼ í•©ë‹ˆë‹¤.

|         | ""  | "a"           | "ac"          | "ace"         |
| ------- | --- | ------------- | ------------- | ------------- |
| ""      | 0   | 0             | 0             | 0             |
| "a"     | 0   | 0 + 1 = 1     | MAX(0, 1) = 1 | MAX(0, 1) = 1 |
| "ab"    | 0   | MAX(1, 0) = 1 | MAX(1, 1) = 1 | MAX(1, 1) = 1 |
| "abc"   | 0   | MAX(1, 0) = 1 | 1 + 1 = 2     | MAX(1, 2) = 2 |
| "abcd"  | 0   | MAX(1, 0) = 1 | MAX(2, 1) = 2 | MAX(2, 2) = 2 |
| "abcde" | 0   | MAX(1, 0) = 1 | MAX(2, 1) = 2 | 1 + 2 = 3     |

ì§€ê¸ˆê¹Œì§€ ì„¤ëª…ë“œë¦° ì•Œê³ ë¦¬ì¦˜ì„ ì½”ë“œë¡œ êµ¬í˜„í•´ë³¼ê¹Œìš”?

```py
class Solution:
    def longestCommonSubsequence(self, text1: str, text2: str) -> int:
        dp = [[0] * (len(text2) + 1) for _ in range(len(text1) + 1)]
        for r in range(1, len(text1) + 1):
            for c in range(1, len(text2) + 1):
                if text1[r - 1] == text2[c - 1]:
                    dp[r][c] = 1 + dp[r - 1][c - 1]
                else:
                    dp[r][c] = max(dp[r - 1][c], dp[r][c - 1])
        return dp[-1][-1]
```

ì´ í’€ì´ëŠ” ë©”ëª¨ì´ì œì´ì…˜ì„ ì ìš©í•œ ìž¬ê·€ ì•Œê³ ë¦¬ì¦˜ í’€ì´ì™€ ë™ì¼í•œ ë³µìž¡ë„ë¥¼ ê°–ìŠµë‹ˆë‹¤.
ì´ì¤‘ ë£¨í”„ë¥¼ ëŒê³ , ì´ì°¨ì› ë°°ì—´ì„ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ìž…ë‹ˆë‹¤.

ë™ì¼í•œ ì½”ë“œë¥¼ ìžë°”ìŠ¤í¬ë¦½íŠ¸ë¡œë„ ìž‘ì„±í•´ë³´ì•˜ìŠµë‹ˆë‹¤.

```ts
function longestCommonSubsequence(text1: string, text2: string): number {
  const dp = Array(text1.length + 1)
    .fill(null)
    .map(() => Array(text2.length + 1).fill(0));

  for (let r = 1; r < text1.length + 1; r++) {
    for (let c = 1; c < text2.length + 1; c++) {
      if (text1[r - 1] === text2[c - 1]) dp[r][c] = 1 + dp[r - 1][c - 1];
      else dp[r][c] = Math.max(dp[r - 1][c], dp[r][c - 1]);
    }
  }

  return dp[text1.length][text2.length];
}
```

## í’€ì´ 4: ìµœì í™”

ëˆˆì°ë¯¸ê°€ ì¢‹ì€ ë¶„ì´ì‹œë¼ë©´ ìœ„ í’€ì´ë¥¼ ë³´ì‹œê³  êµ³ì´ ì´ì°¨ì› ë°°ì—´ì— ëª¨ë“  ê²°ê³¼ê°’ì„ ì €ìž¥í•´ì•¼ í• ê¹Œë¼ëŠ” ì˜ë¬¸ì´ ë“œì‹¤ ê²ƒìž…ë‹ˆë‹¤.
í–‰ ì¸ë±ìŠ¤ `r`ê³¼ ì—´ ì¸ë±ìŠ¤ `c`ì˜ ìœ„ì¹˜ì˜ ë“¤ì–´ê°ˆ ê°’ì„ êµ¬í•  ë•Œ, ìš°ë¦¬ëŠ” ë”± 3ê°œì˜ ìœ„ì¹˜ì— ìžˆëŠ” ê°’ë§Œ ì•Œê³  ìžˆìœ¼ë©´ ë˜ê¸° ë•Œë¬¸ì´ì£ .

- â†– ì¢Œìƒ: í–‰ ì¸ë±ìŠ¤ `r - 1`, ì—´ ì¸ë±ìŠ¤ `c - 1`
- â† ì™¼ìª½: í–‰ ì¸ë±ìŠ¤ `r - 1`, ì—´ ì¸ë±ìŠ¤ `c`
- â†‘ ìœ„ìª½: í–‰ ì¸ë±ìŠ¤ `r`, ì—´ ì¸ë±ìŠ¤ `c - 1`

ë”°ë¼ì„œ ìš°ë¦¬ëŠ” í˜„ìž¬ í–‰ì„ ê³„ì‚°í•  ë•Œ ì´ì „ í–‰ì˜ ì •ë³´ë§Œ í•„ìš”í•˜ë‹¤ëŠ” ê²ƒì„ ê¹¨ë‹«ê²Œ ë©ë‹ˆë‹¤.

ì´ì°¨ì› ë°°ì—´ ëŒ€ì‹ ì— ë‘ ê°œì˜ ì¼ì°¨ì› ë°°ì—´ì„ ì‚¬ìš©í•˜ë„ë¡ ì½”ë“œë¥¼ ìž¬ìž‘ì„±í•´ë³´ê² ìŠµë‹ˆë‹¤.
ìž…ë ¥ìœ¼ë¡œ ì£¼ì–´ì§„ ë‘ ê°œì˜ ë¬¸ìžì—´ ì¤‘ ë” ì§§ì€ ê²ƒì„ ì°¾ì•„ì„œ ê·¸ ê¸¸ì´ ë§Œí¼ì˜ ë°°ì—´ì„ ìƒì„±í•˜ë©´ ë©ë‹ˆë‹¤.

```py
class Solution:
    def longestCommonSubsequence(self, text1: str, text2: str) -> int:
        if len(text1) < len(text2):
            text1, text2 = text2, text1

        prev = [0] * (len(text2) + 1)
        curr = [0] * (len(text2) + 1)

        for r in range(1, len(text1) + 1):
            for c in range(1, len(text2) + 1):
                if text1[r - 1] == text2[c - 1]:
                    curr[c] = 1 + prev[c - 1]
                else:
                    curr[c] = max(prev[c], curr[c - 1])
            prev, curr = curr, prev

        return prev[-1]
```

ë™ì¼í•œ ì½”ë“œë¥¼ ìžë°”ìŠ¤í¬ë¦½íŠ¸ë¡œë„ ìž‘ì„±í•´ë³´ì•˜ìŠµë‹ˆë‹¤.

```js
function longestCommonSubsequence(text1: string, text2: string): number {
  if (text1.length < text2.length) [text1, text2] = [text2, text1];

  let prev = Array(text2.length + 1).fill(0);
  let curr = Array(text2.length + 1).fill(0);

  for (let r = 1; r < text1.length + 1; r++) {
    for (let c = 1; c < text2.length + 1; c++) {
      if (text1[r - 1] === text2[c - 1]) curr[c] = 1 + prev[c - 1];
      else curr[c] = Math.max(prev[c], curr[c - 1]);
    }
    [prev, curr] = [curr, prev];
  }

  return prev[text2.length];
}
```

ì´ë ‡ê²Œ ë©”ëª¨ë¦¬ ìµœì í™”ë¥¼ í•´ì£¼ë©´ ê³µê°„ ë³µìž¡ë„ê°€ `O(m * n)`ì—ì„œ `O(min(m, n))`ìœ¼ë¡œ ë–¨ì–´ì§€ê²Œ ë©ë‹ˆë‹¤.

## ë§ˆì¹˜ë©°

LeetCodeì—ì„œ ë¹„ìŠ·í•œ ë¬¸ì œë¡œ [Valid Palindrome](/problems/valid-palindrome/)ì´ ìžˆìŠµë‹ˆë‹¤.
ì´ ë¬¸ì œë³´ë‹¤ëŠ” ì‰¬ìš´ ë¬¸ì œì´ë¯€ë¡œ ì´ ë¬¸ì œê°€ ë„ˆë¬´ ì–´ë ¤ìš°ì…¨ë‹¤ë©´ ë¨¼ì € í’€ì–´ë³´ì‹œë©´ ë„ì›€ì´ ë  ê²ƒ ê°™ìŠµë‹ˆë‹¤.
