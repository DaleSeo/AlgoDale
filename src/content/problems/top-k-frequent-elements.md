---
title: "Top K Frequent Elements"
tags:
  - leetcode
  - sort
  - heap
  - array
  - python
date: 2024-05-20
---

<iframe width="560" height="315" src="https://www.youtube.com/embed/jI2y1s_dGkM?si=P0i4cHCTjee4StJD" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>

LeetCodeì˜ 347ë²ˆì§¸ ë¬¸ì œì¸ [Top K Frequent Elements](https://leetcode.com/problems/top-k-frequent-elements/)ë¥¼ í•¨ê»˜ í’€ì–´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.

## ë¬¸ì œ

ì •ìˆ˜ ë°°ì—´ `nums`ì™€ ì •ìˆ˜ `k`ê°€ ì£¼ì–´ì¡Œì„ ë•Œ, `nums`ì—ì„œ ê°€ì¥ ë¹ˆë„ê°€ ë†’ì€ `k`ê°œì˜ ìš”ì†Œë¥¼ ì°¾ì•„ë¼.
ìš”ì†Œì˜ ìˆœì„œëŠ” ì¤‘ìš”í•˜ì§€ ì•Šë‹¤.

## ì˜ˆì œ

```py
ì…ë ¥: nums = [1,1,1,2,2,3], k = 2
ì¶œë ¥: [1,2]
```

```py
ì…ë ¥: nums = [1], k = 1
ì¶œë ¥: [1]
```

## í’€ì´ 1: ì •ë ¬

ì •ìˆ˜ ë°°ì—´ì—ì„œ ê°€ì¥ ìì£¼ ë‚˜ì˜¤ëŠ” ìˆ«ì `k`ê°œë¥¼ ì°¾ìœ¼ë ¤ë©´, ë¹ˆë„ê°€ ê°€ì¥ ë†’ì€ ìˆ«ìë¶€í„°, `k` ë²ˆì§¸ë¡œ ë¹ˆë„ê°€ ë†’ì€ ìˆ«ìê¹Œì§€ë¥¼ ì°¾ì•„ì•¼ í• í…ë°ìš”.
ê·¸ëŸ¬ë¯€ë¡œ, ë°°ì—´ì— ë“¤ì–´ ìˆëŠ” ìˆ«ìë¥¼ ìì£¼ ë‚˜ì˜¤ëŠ” ìˆœì„œëŒ€ë¡œ ì •ë ¬ì„ í•œë‹¤ë©´ ì´ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆì„ ê²ƒì…ë‹ˆë‹¤.

ìì£¼ ë‚˜ì˜¤ëŠ” ìˆœì„œëŒ€ë¡œ ì •ë ¬ì„ í•˜ë ¤ë©´ ìš°ì„  ë°°ì—´ì—ì„œ ê° ìˆ«ìê°€ ëª‡ ë²ˆ ë‚˜ì˜¤ëŠ”ì§€ë¥¼ êµ¬í•´ì•¼í•˜ê² ì£ ?
ë°°ì—´ì„ ìƒëŒ€ë¡œ ë£¨í”„ë¥¼ ëŒë©´ì„œ [í•´ì‹œ í…Œì´ë¸”(Hash Table)](/data-structures/hash-table/)ì— ê° ìˆ«ìê°€ ë‚˜ì˜¨ íšŸìˆ˜ë¥¼ ì €ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì˜ˆë¥¼ ë“¤ì–´ì„œ ì•„ë˜ì™€ ê°™ì€ ì •ìˆ˜ ë°°ì—´ì´ ì£¼ì–´ì¡Œì„ ë•Œ í•´ì‹œ í…Œì´ë¸”ì´ ì´ì™€ ê°™ì€ ëª¨ì–‘ì´ ë  ê²ƒì…ë‹ˆë‹¤.

```py
nums = [1, 1, 1, 2, 2, 3, 4, 4, 4, 4, 4]
counter = {
    1: 3,
    2: 2,
    3: 1,
    4: 5
}
```

ì´ì œ í•´ì‹œ í…Œì´ë¸”ì— ì €ì¥í•´ ë‘” íšŸìˆ˜ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ìˆ«ìë¥¼ ì •ë ¬í•˜ë©´ ë˜ëŠ”ë°ìš”.
ì˜¤ë¦„ ì°¨ìˆœìœ¼ë¡œ ì •ë ¬í•  ê²½ìš°ì—ëŠ” ë°°ì—´ì˜ ë’¤ì—ì„œ `k`ê°œì˜ ì›ì†Œë¥¼ ì„ íƒí•˜ë©´ ë©ë‹ˆë‹¤.

```py
k = 2
sorted_nums = [3, 2, 1, 4] # [1íšŒ, 2íšŒ, 3íšŒ, 5íšŒ]
                     ğŸ‘† ğŸ‘† # 2ê°œì˜ ì›ì†Œ ì„ íƒ
```

ì´ ì•Œê³ ë¦¬ì¦˜ì„ íŒŒì´ì¬ìœ¼ë¡œ êµ¬í˜„í•´ë³´ê² ìŠµë‹ˆë‹¤.

```py
class Solution:
    def topKFrequent(self, nums: List[int], k: int) -> List[int]:
        counter = {}
        for num in nums:
            counter[num] = counter.get(num, 0) + 1
        sorted_nums = sorted(counter, key=lambda num: counter[num])
        return sorted_nums[-k:]
```

ë§Œì•½ì— ë‚´ë¦¼ ì°¨ìˆœìœ¼ë¡œ ì •ë ¬í–ˆë‹¤ë©´ ë°°ì—´ì˜ ì•ì—ì„œ `k`ê°œì˜ ì›ì†Œë¥¼ ì„ íƒí•˜ë©´ ë  ê²ƒì…ë‹ˆë‹¤.

```py
k = 2
sorted_nums = [4, 1, 2, 3] # [5íšŒ, 3íšŒ, 2íšŒ, 1íšŒ]
               ğŸ‘† ğŸ‘†      # 2ê°œì˜ ì›ì†Œ ì„ íƒ
```

ì´ ì•Œê³ ë¦¬ì¦˜ë„ íŒŒì´ì¬ìœ¼ë¡œ êµ¬í˜„í•´ë³´ê² ìŠµë‹ˆë‹¤.

```py
class Solution:
    def topKFrequent(self, nums: List[int], k: int) -> List[int]:
        counter = {}
        for num in nums:
            counter[num] = counter.get(num, 0) + 1
        sorted_nums = sorted(counter, key=lambda num: -counter[num])
        return sorted_nums[:k]
```

ì…ë ¥ ë°°ì—´ì— ë“¤ì–´ìˆëŠ” ì •ìˆ˜ì˜ ê°œìˆ˜ë¥¼ `n`ì´ë¼ê³  í–ˆì„ ë•Œ, ì´ í’€ì´ì˜ ì‹œê°„ ë³µì¡ë„ëŠ” ì •ë ¬ì„ ì‚¬ìš©í•˜ë¯€ë¡œ `O(n * log n)`ì…ë‹ˆë‹¤.
ê³µê°„ ë³µì¡ë„ëŠ” ë°°ì—´ì˜ ìˆëŠ” ì •ìˆ˜ê°€ ëª¨ë‘ ìœ ì¼í•  ê²½ìš° í•´ì‹œ í…Œì´ë¸”ì— `n`ê°œì˜ í‚¤ì™€ ê°’ì˜ ìŒì„ ì €ì¥í•´ì•¼í•˜ë¯€ë¡œ `O(n)`ì´ ë˜ê² ìŠµë‹ˆë‹¤.

## í’€ì´ 2: í™

`O(n * log n)`ì˜ ì‹œê°„ì´ ê±¸ë¦¬ëŠ” ì •ë ¬ì„ í•˜ì§€ ì•Šê³  ì´ ë¬¸ì œë¥¼ í’€ ìˆ˜ëŠ” ì—†ì„ê¹Œìš”?
ì´ë²ˆì—ëŠ” [í™(Heap)](/data-structures/heap/) ìë£Œêµ¬ì¡°ë¥¼ í•œ ë²ˆ ì‚¬ìš©í•´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.

ê¸°ë³¸ ì•„ì´ë””ì–´ëŠ” ìµœì†Œ í™(Min Heap)ì„ ì‚¬ìš©í•˜ì—¬ ìì£¼ ë‚˜ì˜¤ëŠ” ìƒìœ„ `k`ê°œì˜ ìˆ«ìë§Œ ì¶”ë ¤ë‚´ëŠ” ê±´ë°ìš”.
ìš°ì„  í™ ì•ˆì— ë“¤ì–´ìˆëŠ” ìˆ«ìê°€ ê°œìˆ˜ê°€ `k`ê°€ ë  ë•Œê¹Œì§€ëŠ” ë¬´ì¡°ê±´ ìˆ«ìë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ê·¸ëŸ¬ë‹¤ê°€ í™ ì•ˆì— ë“¤ì–´ìˆëŠ” ìˆ«ìê°€ ê°œìˆ˜ê°€ `k`ê°œë¥¼ ì´ˆê³¼í•˜ê²Œ ë˜ë©´, í™ì—ì„œ í•´ë‹¹ ìˆ«ìë¥¼ ì¶”ê°€í•  ë¿ë§Œ ì•„ë‹ˆë¼ í™ì— ë“¤ì–´ ìˆëŠ” ê°€ì¥ ë¹ˆë„ê°€ ì‘ì€ ìˆ«ìë„ ì œê±°í•´ì¤ë‹ˆë‹¤.
í™ì—ì„œ ì›ì†Œë¥¼ ì œê±°í•  ë•ŒëŠ” ì—¬íƒœê¹Œì§€ ì €ì¥ëœ ìˆ«ì ì¤‘ì—ì„œ ë¹ˆë„ê°€ ê°€ì¥ ì‘ì€ ê°’ì´ ë‚˜ì˜¤ê¸° ë•Œë¬¸ì—, ìš°ë¦¬ëŠ” í•­ìƒ ë¹ˆë„ê°€ ë†’ì€ `k`ê°œ ê°’ì„ í™ ì•ˆì— ìœ ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ìœ„ì—ì„œ ì‚¬ìš©í•œ ë™ì¼í•œ ì…ë ¥ì„ ê¸°ì¤€ìœ¼ë¡œ ì²œì²œíˆ ìƒê°í•´ë³´ê² ìŠµë‹ˆë‹¤.

```py
nums = [1, 1, 1, 2, 2, 3, 4, 4, 4, 4, 4]
```

ìš°ì„  í•´ì‹œ í…Œì´ë¸”ì„ `(ë¹ˆë„, ìˆ«ì)`ì˜ ì›ì†Œë¥¼ ë‹´ê³ ìˆëŠ” ë¦¬ìŠ¤íŠ¸ë¡œ ë³€í™˜í•´ë³´ê² ìŠµë‹ˆë‹¤.
ì´ë ‡ê²Œ í•´ì£¼ë©´ í™ì´ ë‚´ë¶€ì ìœ¼ë¡œ ë¹ˆë„ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë°ì´í„°ë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.

```py
counter = [(3, 1), (2, 2), (1, 3), (5, 4)]
```

`k`ê°€ `2`ì´ë¯€ë¡œ ì²˜ìŒ ë‘ ê°œì˜ ì›ì†ŒëŠ” ê·¸ëƒ¥ í™ì— ì¶”ê°€í•©ë‹ˆë‹¤.

```py
(3, 1) ì¶”ê°€
heap = [(3, 1)]
```

```py
(2, 2) ì¶”ê°€
heap = [(3, 1), (2, 2)]
```

ì„¸ ë²ˆì§¸ ì›ì†Œ `(1, 3)`ì„ ì¶”ê°€í•˜ë©´ í™ì´ í¬ê¸°ê°€ `3`ì´ ë˜ë¯€ë¡œ í™ì˜ í¬ê¸°ë¥¼ `2`ë¡œ ì¤„ì´ê¸° í™ì—ì„œ ì›ì†Œë¥¼ í•˜ë‚˜ ì œê±°í•´ì•¼í•©ë‹ˆë‹¤.
ìµœì†Œ í™ì€ ì €ì¥ëœ ì›ì†Œ ì¤‘ì—ì„œ ê°€ì¥ ì‘ì€ ê°’ì„ ì œê±°í•˜ë¯€ë¡œ ë°©ê¸ˆ ì¶”ê°€í•œ `(1, 3)`ì´ ë°”ë¡œ ì œê±°ë©ë‹ˆë‹¤.

```py
(1, 3) ì¶”ê°€
heap = [(3, 1), (2, 2), (1, 3)]
(1, 3) ì œê±°
heap = [(3, 1), (2, 2)]
```

ë„¤ ë²ˆì§¸ ì›ì†Œ `(5, 4)`ì„ ìµœì†Œ í™ì— ì¶”ê°€í•œ ìµœì†Œ í™ì—ì„œ ê°’ í•˜ë‚˜ë¥¼ ì œê±°í•˜ë©´ ê°€ì¥ ì‘ì€ `(2, 2)`ê°€ ì œê±°ë©ë‹ˆë‹¤.

```py
(5, 4) ì¶”ê°€
heap = [(3, 1), (2, 2), (5, 4)]
(2, 2) ì œê±°
heap = [(3, 1), (5, 4)]
```

ìµœì¢…ì ìœ¼ë¡œ `1`ê³¼ `4`ê°€ ê°€ì¥ ìì£¼ ë‚˜ì˜¤ëŠ” ìˆ«ìì…ë‹ˆë‹¤.

```py
heap = [(3, 1), (5, 4)]
            ğŸ‘†      ğŸ‘†
```

ì´ ì•Œê³ ë¦¬ì¦˜ì„ íŒŒì´ì¬ì— ë‚´ì¥ëœ `heapq` ëª¨ë“ˆì„ ì‚¬ìš©í•˜ì—¬ êµ¬í˜„í•´ë³´ê² ìŠµë‹ˆë‹¤.

```py
from heapq import heappush, heappop


class Solution:
    def topKFrequent(self, nums: List[int], k: int) -> List[int]:
        counter = {}
        for num in nums:
            counter[num] = counter.get(num, 0) + 1

        heap = []
        for num, cnt in counter.items():
            heappush(heap, (cnt, num))
            if len(heap) > k:
                heappop(heap)
        return [num for _, num in heap]
```

ì´ í’€ì´ì˜ ì‹œê°„ ë³µì¡ë„ëŠ” `O(n * log k)`ë¡œ ê°œì„ ì´ ë˜ëŠ”ë°ìš”.
í¬ê¸°ê°€ `k`ì¸ í™ì— ì›ì†Œë¥¼ ì¶”ê°€í•˜ê±°ë‚˜ ì œê±°í•˜ëŠ”ë°ëŠ” `O(log k)`ì˜ ì‹œê°„ì´ ê±¸ë¦¬ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

ê³µê°„ ë³µì¡ë„ëŠ” í™ì´ ì°¨ì§€í•˜ëŠ” ì¶”ê°€ ë©”ëª¨ë¦¬ ë•Œë¬¸ì— `O(n + k)`ì´ ë˜ê² ìŠµë‹ˆë‹¤.

## í’€ì´ 3: ì¹´ìš´í„°

í˜¹ì‹œ íŒŒì´ì¬ìœ¼ë¡œ ë¬¸ì œë¥¼ í‘¸ì‹ ë‹¤ë©´ `Counter` ë‚´ì¥ ìë£Œ êµ¬ì¡°ë¥¼ ì‚¬ìš©í•˜ì—¬ ë‹¤ìŒê³¼ ê°™ì´ ë‹¨ í•œ ë‘ ì¤„ì˜ ì½”ë“œë¡œë„ í•´ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ì‹¤ì œ ì½”ë”© í…ŒìŠ¤íŠ¸ì—ì„œ ë‚´ì¥ ìë£Œêµ¬ì¡°ì— ì§€ë‚˜ì¹˜ê²Œ ì˜ì¡´í•˜ëŠ” ê²ƒì€ ê·¸ë‹¤ì§€ ì¶”ì²œë˜ì§€ ì•Šìœ¼ë¯€ë¡œ, ê·¸ëƒ¥ ì´ë ‡ê²Œë„ í’€ ìˆ˜ ìˆë‹¤ëŠ” ê²ƒë§Œ ì•Œì•„ ë‘ì‹œë©´ ì¢‹ì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤.

```py
from collections import Counter


class Solution:
    def topKFrequent(self, nums: List[int], k: int) -> List[int]:
        counter = Counter(nums)
        return [num for num, _ in counter.most_common(k)]
```

## í’€ì´ 4: ë°°ì—´

í˜¹ì‹œ í•˜ë‚˜ì˜ ìˆ«ìê°€ ë‚˜ì˜¬ ìˆ˜ ìˆëŠ” ìµœëŒ€ ë¹ˆë„ëŠ” ëª‡ì´ ë ì§€ ìƒê°í•´ë³´ì…¨ë‚˜ìš”?
ì…ë ¥ ë°°ì—´ì´ í•œ ê°€ì§€ ìˆ«ìë§Œ ì±„ì›Œì§„ ê²½ìš°ì¼í…ë°ìš”.
ì´ ë•Œ ìˆ«ìì˜ ë¹ˆë„ëŠ” `n`ì¼ ê²ƒì…ë‹ˆë‹¤.

ê·¸ëŸ¼ ìš°ë¦¬ ì´ì°¨ì› [ë°°ì—´(array)](/data-structures/array/) ìë£Œêµ¬ì¡°ë¥¼ í™œìš©í•´ë³´ë©´ ì–´ë–¨ê¹Œìš”?
ê¸°ë³¸ ì•„ì´ë””ì–´ëŠ” ë°°ì—´ì˜ ì¸ë±ìŠ¤ë¡œ ë¹ˆë„ë¥¼ ì €ì¥í•˜ê³ , ê°’ìœ¼ë¡œ ê·¸ ë¹ˆë„ì— í•´ë‹¹í•˜ëŠ” ëª¨ë“  ìˆ«ìë¥¼ ë°°ì—´ë¡œ ì €ì¥í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.
ê·¸ ë‹¤ìŒ, ë°°ì—´ì„ ì¸ë±ìŠ¤ ìˆœì„œëŒ€ë¡œ ë˜ëŠ” ì—­ìˆœìœ¼ë¡œ íƒìƒ‰í•˜ë©´ ê°€ì¥ ìì£¼ ë‚˜ì˜¤ëŠ” ìˆ«ì `k`ë¥¼ ì°¾ì„ ìˆ˜ ìˆì§€ ì•Šì„ê¹Œìš”?

ì´ê²Œ ë¬´ìŠ¨ ë§ì¸ì§€ ìœ„ì—ì„œ ì•„ë˜ì™€ ê°™ì€ ì…ë ¥ì„ ê¸°ì¤€ìœ¼ë¡œ ì„¤ëª…ë“œë¦´ê»˜ìš”.

```py
nums = [1, 1, 1, 2, 2, 3, 4, 4, 4, 4, 4, 5, 5]
k = 2
```

ìš°ì„  ê° ìˆ«ìì˜ ë¹ˆë„ë¥¼ í•´ì‹œ í…Œì´ë¸”ì— ì €ì¥í•˜ëŠ” ë¶€ë¶„ì€ ìœ„ í’€ì´ë“¤ê³¼ ë™ì¼í•˜ê³ ìš”.

```py
counter = {
    1: 3,
    2: 2,
    3: 1,
    4: 5,
    5: 2
}
```

ê·¸ ë‹¤ìŒì—ëŠ” ê¸¸ì´ê°€ `n + 1`ì¸ ë°°ì—´ì´ í•„ìš”í•©ë‹ˆë‹¤.
ì™œëƒí•˜ë©´ ì•„ë¬´ë¦¬ í•˜ë‚˜ì˜ ìˆ«ìê°€ ë§ì´ ë‚˜ì™€ë„ `n`ë²ˆì„ ë„˜ì„ ìˆ˜ ì—†ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

```py
buckets = [
    [],         # 0íšŒ
    [3],        # 1íšŒ
    [2, 5],     # 2íšŒ
    [1],        # 3íšŒ
    [],         # 4íšŒ
    [4],        # 5íšŒ
    []
]
```

ì ì´ì œ, ì´ ì´ì°¨ì› ë°°ì—´ì— ì €ì¥ë˜ì–´ ìˆëŠ” ìˆ«ìë“¤ì„ ì¸ë±ìŠ¤ ìˆœìœ¼ë¡œ ë£¨í”„ë¥¼ ëŒë©´ì„œ ëª¨ë“  ë°°ì—´ì— ìˆëŠ” ìˆ«ìë¥¼ í¼ì³ë³´ê² ìŠµë‹ˆë‹¤.
ë¯¸ì§€ë§‰ `k`ê°œì˜ ì›ì†Œê°€ ê°€ì¥ ìì£¼ ë‚˜ì˜¨ ìˆ«ìë¼ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```py
[3, 2, 1, 5, 4]
          ğŸ‘† ğŸ‘†
```

ì¸ë±ìŠ¤ì˜ ì—­ìˆœìœ¼ë¡œ ë£¨í”„ë¥¼ ëŒë©´ì„œ ìˆ«ìë“¤ì„ í¼ì³¤ë‹¤ë©´ ì–´ë• ì„ê¹Œìš”? ì´ë•ŒëŠ” ì²˜ìŒ `k`ê°œì˜ ì›ì†Œê°€ ë˜ì—ˆì„ ê²ƒì…ë‹ˆë‹¤.

```py
[4, 5, 1, 2, 3]
 ğŸ‘† ğŸ‘†
```

ì´ ì•Œê³ ë¦¬ì¦˜ íŒŒì´ì¬ìœ¼ë¡œ êµ¬í˜„í•´ë³´ê² ìŠµë‹ˆë‹¤.

```py
class Solution:
    def topKFrequent(self, nums: List[int], k: int) -> List[int]:
        counter = Counter(nums)
        buckets = [[] for _ in range(len(nums) + 1)]
        for num, cnt in counter.items():
            buckets[cnt].append(num)
        sorted_nums = [item for bucket in buckets for item in bucket]
        return sorted_nums[-k:]
```

ì´ í’€ì´ì˜ ì‹œê°„ ë³µì¡ë„ëŠ” `O(n)`ìœ¼ë¡œ í–¥ìƒì´ ë©ë‹ˆë‹¤.
ì™œëƒí•˜ë©´ ì…ë ¥ ë°°ì—´, í•´ì‹œ í…Œì´ë¸”, ì´ì°¨ì› ë°°ì—´ì„ ìˆœì°¨ì ìœ¼ë¡œ ë£¨í”„ë¥¼ ëŒê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

ê³µê°„ ë³µì¡ë„ë„ `O(n)`ìœ¼ë¡œ ê°œì„ ì´ ë˜ëŠ”ë°ìš”.
í•´ì‹œ í…Œì´ë¸”ê³¼ ì´ì°¨ì› ë°°ì—´ì˜ í¬ê¸°ê°€ `n`ê³¼ ë¹„ë¡€í•´ì„œ ì»¤ì§€ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.
