---
title: "Word Search II"
tags:
  - leetcode
  - matrix
  - trie
  - graph
  - backtracking
  - dfs
  - recursion
  - python
date: 2024-07-25
---

LeetCodeì˜ 212ë²ˆì§¸ ë¬¸ì œì¸ [Word Search II](https://leetcode.com/problems/word-search-ii/)ë¥¼ í•¨ê»˜ í’€ì–´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.

## ë¬¸ì œ

ê¸€ìë“¤ë¡œ ì´ë£¨ì–´ì§„ `m x n` íŒê³¼ ë¬¸ìì—´ì˜ ëª©ë¡ì¸ `words`ê°€ ì£¼ì–´ì¡Œì„ ë•Œ, ê¸€ìíŒì—ì„œ ìˆëŠ” ëª¨ë“  ë‹¨ì–´ë¥¼ ë°˜í™˜í•˜ì‹œì˜¤.

ê° ë‹¨ì–´ëŠ” ìˆ˜í‰ ë˜ëŠ” ìˆ˜ì§ìœ¼ë¡œ ì¸ì ‘í•œ ì…€ë“¤ì˜ ê¸€ìë“¤ë¡œ ë§Œë“¤ì–´ì ¸ì•¼ í•©ë‹ˆë‹¤.
ë™ì¼í•œ ë¬¸ì ì…€ì€ í•œ ë‹¨ì–´ì—ì„œ ë‘ ë²ˆ ì´ìƒ ì‚¬ìš©ë  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.

## ì˜ˆì œ

![search1](https://assets.leetcode.com/uploads/2020/11/07/search1.jpg)

```py
ì…ë ¥:
board = [["o","a","a","n"],["e","t","a","e"],["i","h","k","r"],["i","f","l","v"]]
words = ["oath","pea","eat","rain"]
ì¶œë ¥: ["eat","oath"]
```

![search2](https://assets.leetcode.com/uploads/2020/11/07/search2.jpg)

```py
ì…ë ¥:
board = [["a","b"],["c","d"]]
words = ["abcb"]
ì¶œë ¥: []
```

## í’€ì´ 1

ì´ ë¬¸ì œëŠ” ì˜ˆì „ì— í’€ì—ˆë˜ [Word Search](/problems/word-search/) ë¬¸ì œì—ì„œ êµ¬í˜„í–ˆë˜ ì•Œê³ ë¦¬ì¦˜ì„ ê·¸ëŒ€ë¡œ ê°€ì ¸ì™€ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ë‹¨ì§€ ì°¨ì´ì ì€ í•˜ë‚˜ì˜ ë¬¸ìì—´ ëŒ€ì‹ ì— ì—¬ëŸ¬ ë¬¸ìì—´ì„ ëŒ€ìƒìœ¼ë¡œ ê°™ì€ ì‘ì—…ì„ í•´ì•¼í•œë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤.
ë”°ë¼ì„œ ì£¼ì–´ì§„ ë¬¸ìì—´ ë°°ì—´ì„ ìƒëŒ€ë¡œ ë£¨í”„ë¥¼ ëŒë©´ì„œ ê° ë¬¸ìì—´ì— ëŒ€í•´ì„œ ë™ì¼í•œ ì•Œê³ ë¦¬ì¦˜ì„ ì ìš©í•˜ë©´ ë©ë‹ˆë‹¤.

```py
class Solution:
    def findWords(self, board: List[List[str]], words: List[str]) -> List[str]:
        def dfs(word, idx, row, col):
            if idx == len(word):
                return True
            if not (0 <= row < len(board) and 0 <= col < len(board[0])):
                return False
            if board[row][col] != word[idx]:
                return False

            temp = board[row][col]
            board[row][col] = ""
            result = any(
                [
                    dfs(word, idx + 1, row - 1, col),
                    dfs(word, idx + 1, row + 1, col),
                    dfs(word, idx + 1, row, col - 1),
                    dfs(word, idx + 1, row, col + 1),
                ]
            )
            board[row][col] = temp
            return result

        def exist(word):
            for r in range(len(board)):
                for c in range(len(board[0])):
                    if dfs(word, 0, r, c):
                        return True
            return False

        return [word for word in words if exist(word)]
```

ì…ë ¥ ê²©ìì˜ ë†’ì´ë¥¼ `m`, ë„ˆë¹„ë¥¼ `n`, ë¬¸ìì—´ì˜ ìˆ˜ë¥¼ `w`, ë¬¸ìì—´ì˜ ìµœëŒ€ ê¸¸ì´ë¥¼ `s`ë¼ê³  í–ˆì„ ë•Œ, ì´ í’€ì´ì˜ ì‹œê°„ ë³µì¡ë„ëŠ” `O(m * n * w * 4^s)`ì…ë‹ˆë‹¤.
ë¬¸ìì—´ í•˜ë‚˜ê°€ ê²©ìì— ì¡´ì¬í•˜ëŠ”ì§€ êµ¬í•˜ëŠ”ë° `O(m * n * 4^s)` ì‹œê°„ì´ ê±¸ë¦¬ëŠ”ë° ì´ ì‘ì—…ì„ ë¬¸ìì—´ ìˆ˜ì¸ `w`ë²ˆ ë°˜ë³µí•´ì•¼í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

## í’€ì´ 2

ë¬¸ìì—´ì„ ê²€ìƒ‰í•˜ëŠ”ë° ìµœì í™”ëœ ìë£Œêµ¬ì¡°ì¸ [íŠ¸ë¼ì´(Trie)](/data-structures/trie/)ë¥¼ ì‚¬ìš©í•˜ë©´ ì´ ë¬¸ì œë¥¼ ì¢€ ë” íš¨ê³¼ì ìœ¼ë¡œ í•´ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ìš°ì„  ëª¨ë“  ë¬¸ìì—´ì„ íŠ¸ë¼ì´ì— ì¶”ê°€ë¥¼ í•©ë‹ˆë‹¤.
ê·¸ ë‹¤ìŒì—ëŠ” ê¸€ìíŒì˜ ê° ì¢Œí‘œë¡œ ë¶€í„° ì‹œì‘í•´ì„œ ìƒí•˜ì¢Œìš°ë¥¼ ì¬ê·€ì ìœ¼ë¡œ ê¹Šì´ ìš°ì„  íƒìƒ‰ì„ ì‹œì‘í•˜ëŠ”ë°ìš”.
ì´ ë•Œ íŠ¸ë¼ì´ë„ ìµœìƒìœ„ ë…¸ë“œë¶€í„° í•¨ê»˜ ë”°ë¼ ë‚´ë ¤ê°‘ë‹ˆë‹¤.

ì˜ˆë¥¼ ë“¤ì–´, ë‹¤ìŒ 5ê°œì˜ ë‹¨ì–´ë¥¼ íŠ¸ë¼ì´ì— ì €ì¥í•˜ë©´ ì•„ë˜ì™€ ê°™ì€ ëª¨ìŠµì´ ë˜ëŠ”ë°ìš”.

```py
words = ["oa", "oath", "pea", "eat", "rain"]
```

```py
o
    a($)
        t
            h($)
d
    i
        g($)
    o
        g($)
            s($)
```

ë‹¤ìŒê³¼ ê°™ì€ ê¸€ìíŒì—ì„œ ë‹¨ì–´ë¥¼ ìƒí•˜ì¢Œìš°ë¥¼ ì¬ê·€ì ìœ¼ë¡œ ê¹Šì´ ìš°ì„  íƒìƒ‰í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì€ ëª¨ìŠµìœ¼ë¡œ ì°¾ì•„ì§ˆ ê²ƒì…ë‹ˆë‹¤.

```py
board = [
    ["o", "a", "a", "n"],
    ["e", "t", "a", "e"],
    ["i", "h", "d", "o"],
    ["i", "f", "l", "g"],
]
```

```py
board[0][0] = "o" ğŸ‘‰ íŠ¸ë¼ì´ì— "o"ë¡œ ì‹œì‘í•˜ëŠ” ë‹¨ì–´ ìˆì–´ì„œ ì¶”ê°€ íƒìƒ‰
    ìƒ: board[-1][0] ğŸ‘‰ ê¸€ìíŒì—ì„œ ë²—ì–´ë‚¨ âŒ
    í•˜: board[1][0] = "e" ğŸ‘‰ íŠ¸ë¼ì´ì— "oaa"ë¡œ ì‹œì‘í•˜ëŠ” ë‹¨ì–´ ì—†ìŒ âŒ
    ì¢Œ: board[0][-1] ğŸ‘‰ ê¸€ìíŒì—ì„œ ë²—ì–´ë‚¨ âŒ
    ìš°: board[0][1] = "a" ğŸ‘‰ íŠ¸ë¼ì´ì—ì„œ "oa" ì°¾ìŒ âœ…
        ìƒ: board[-1][1] ğŸ‘‰ ê¸€ìíŒì—ì„œ ë²—ì–´ë‚¨ âŒ
        í•˜: board[1][1] = "t" ğŸ‘‰ íŠ¸ë¼ì´ì— "oat"ë¡œ ì‹œì‘í•˜ëŠ” ë‹¨ì–´ ìˆì–´ì„œ ì¶”ê°€ íƒìƒ‰
          ìƒ: board[0][1] = "a" ğŸ‘‰ ì´ë¯¸ ì‚¬ìš©í•œ ì¢Œí‘œì˜ ê¸€ì âŒ
          í•˜: board[2][1] = "h" ğŸ‘‰ íŠ¸ë¼ì´ì—ì„œ "oath" ì°¾ìŒ âœ…
          ì¢Œ: board[1][0] = "e" ğŸ‘‰ íŠ¸ë¼ì´ì— "oate" ì—†ìŒ âŒ
          ìš°: board[1][2] = "a" ğŸ‘‰ íŠ¸ë¼ì´ì— "oata" ì—†ìŒ âŒ
        ì¢Œ: board[0][0] = "o" ğŸ‘‰ ì´ë¯¸ ì‚¬ìš©í•œ ì¢Œí‘œì˜ ê¸€ì âŒ
        ìš°: board[0][2] = "a" ğŸ‘‰ íŠ¸ë¼ì´ì— "oaa"ë¡œ ì‹œì‘í•˜ëŠ” ë‹¨ì–´ ì—†ìŒ âŒ

board[2][2] = "d"
    ìƒ: board[1][2] = "a" ğŸ‘‰ íŠ¸ë¼ì´ì— "da"ë¡œ ì‹œì‘í•˜ëŠ” ë‹¨ì–´ ì—†ìŒ âŒ
    í•˜: board[3][2] = "l" ğŸ‘‰ íŠ¸ë¼ì´ì— "dl"ë¡œ ì‹œì‘í•˜ëŠ” ë‹¨ì–´ ì—†ìŒ âŒ
    ì¢Œ: board[2][1] = "h" ğŸ‘‰ íŠ¸ë¼ì´ì— "dh"ë¡œ ì‹œì‘í•˜ëŠ” ë‹¨ì–´ ì—†ìŒ âŒ
    ìš°: board[2][3] = "o" ğŸ‘‰ íŠ¸ë¼ì´ì— "do"ë¡œ ì‹œì‘í•˜ëŠ” ë‹¨ì–´ ìˆì–´ì„œ ì¶”ê°€ íƒìƒ‰
        ìƒ: board[1][3] = íŠ¸ë¼ì´ì— "doe"ë¡œ ì‹œì‘í•˜ëŠ” ë‹¨ì–´ ì—†ìŒ âŒ
        í•˜: board[3][3] = "g" ğŸ‘‰ íŠ¸ë¼ì´ì—ì„œ "dog" ì°¾ìŒ âœ…
        ì¢Œ: board[2][2] = "d" ì´ë¯¸ ì‚¬ìš©í•œ ì¢Œí‘œì˜ ê¸€ì âŒ
        ìš°: board[2][4] ğŸ‘‰ ê¸€ìíŒì—ì„œ ë²—ì–´ë‚¨ âŒ

board[2][3] = "o" ğŸ‘‰ íŠ¸ë¼ì´ì— "o"ë¡œ ì‹œì‘í•˜ëŠ” ë‹¨ì–´ ìˆì–´ì„œ ì¶”ê°€ íƒìƒ‰
    ìƒ: board[1][3] = "e" ğŸ‘‰ íŠ¸ë¼ì´ì— "oe"ë¡œ ì‹œì‘í•˜ëŠ” ë‹¨ì–´ ì—†ìŒ âŒ
    í•˜: board[3][3] = "g" ğŸ‘‰ íŠ¸ë¼ì´ì— "og"ë¡œ ì‹œì‘í•˜ëŠ” ë‹¨ì–´ ì—†ìŒ âŒ
    ì¢Œ: board[2][2] = "d" ğŸ‘‰ íŠ¸ë¼ì´ì— "od"ë¡œ ì‹œì‘í•˜ëŠ” ë‹¨ì–´ ì—†ìŒ âŒ
    ìš°: board[2][4] ğŸ‘‰ ê¸€ìíŒì—ì„œ ë²—ì–´ë‚¨ âŒ
```

ì„¤ëª…ë“œë¦° ì•Œê³ ë¦¬ì¦˜ì„ ì½”ë“œë¡œ êµ¬í˜„í•´ë³´ê² ìŠµë‹ˆë‹¤.
ìµœëŒ€í•œ ê°„ë‹¨í•œ êµ¬í˜„ì„ ìœ„í•´ì„œ íŒŒì´ì¬ì˜ ì‚¬ì „(dictionary)ë¥¼ ì‚¬ìš©í•˜ì—¬ íŠ¸ë¼ì´ì˜ ë…¸ë“œë¥¼ ë‚˜íƒ€ë‚´ì˜€ìŠµë‹ˆë‹¤.
ê° ê¸€ìë¥¼ í‚¤ë¡œ ìì‹ ì‚¬ì „ì„ ê°’ìœ¼ë¡œ ì €ì¥í•˜ê³ , í•´ë‹¹ ë…¸ë“œì—ì„œ ëë‚˜ëŠ” ë‹¨ì–´ê°€ ìˆë‹¤ë©´ `$` í‚¤ì— ì „ì²´ ë‹¨ì–´ë¥¼ ì €ì¥í•˜ì˜€ìŠµë‹ˆë‹¤.

```py
class Solution:
    def findWords(self, board: List[List[str]], words: List[str]) -> List[str]:
        root = {}
        for word in words:
            node = root
            for ch in word:
                if ch not in node:
                    node[ch] = {}
                node = node[ch]
            node["$"] = word

        output = []

        def dfs(row, col, node):
            if "$" in node:
                output.append(node["$"])
                del node["$"]  # ê°™ì€ ë‹¨ì–´ë¥¼ ì¤‘ë³µí•´ì„œ ì°¾ëŠ” ê²ƒì„ ë°©ì§€

            if not (0 <= row < len(board) and 0 <= col < len(board[row])):
                return
            if board[row][col] not in node:
                return

            node = node[board[row][col]]

            temp = board[row][col]
            board[row][col] = ""

            dfs(row - 1, col, node)
            dfs(row + 1, col, node)
            dfs(row, col - 1, node)
            dfs(row, col + 1, node)

            board[row][col] = temp

        for r in range(len(board)):
            for c in range(len(board[r])):
                dfs(r, c, root)

        return output
```

ì´ í’€ì´ëŠ” ë” ì´ìƒ `w` ë²ˆ ë°˜ë³µì„ í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ ì‹œê°„ ë³µì¡ë„ê°€ `O(m * n * 4^s)`ë¡œ ê°œì„ ë©ë‹ˆë‹¤.

## ë§ˆì¹˜ë©´ì„œ

ì´ ë¬¸ì œê°€ ë„ˆë¬´ ì–´ë ¤ìš°ì…¨ë‹¤ë©´ ë¹„ìŠ·í•˜ì§€ë§Œ ì¢€ ë” ì‰¬ìš´ ë¬¸ì œì¸ [Word Search](/problems/word-search/)ë„ í’€ì–´ë³´ì‹œë¼ê³  ì¶”ì²œë“œë¦½ë‹ˆë‹¤.
